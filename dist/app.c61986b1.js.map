{"version":3,"sources":["../node_modules/xstate/es/_virtual/_tslib.js","../node_modules/xstate/es/types.js","../node_modules/xstate/es/actionTypes.js","../node_modules/xstate/es/constants.js","../node_modules/xstate/es/environment.js","../node_modules/xstate/es/utils.js","../node_modules/xstate/es/actions.js","../node_modules/xstate/es/serviceScope.js","../node_modules/xstate/es/Actor.js","../node_modules/xstate/es/stateUtils.js","../node_modules/xstate/es/State.js","../node_modules/xstate/es/scheduler.js","../node_modules/xstate/es/registry.js","../node_modules/xstate/es/devTools.js","../node_modules/xstate/es/behaviors.js","../node_modules/xstate/es/interpreter.js","../node_modules/xstate/es/invokeUtils.js","../node_modules/xstate/es/StateNode.js","../node_modules/xstate/es/Machine.js","../node_modules/xstate/es/mapState.js","../node_modules/xstate/es/match.js","../node_modules/xstate/es/schema.js","../node_modules/xstate/es/index.js","scripts/state.ts","../node_modules/animejs/lib/anime.es.js","app.ts","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","ar","push","error","__spreadArray","to","from","pack","l","Array","slice","concat","ActionTypes","SpecialTargets","start","Start","stop","Stop","raise","Raise","send","Send","cancel","Cancel","nullEvent","NullEvent","Assign","after","After","doneState","DoneState","log","Log","init","Init","invoke","Invoke","errorExecution","ErrorExecution","errorPlatform","ErrorPlatform","ErrorCustom","update","Update","choose","Choose","pure","Pure","STATE_DELIMITER","EMPTY_ACTIVITY_MAP","DEFAULT_GUARD_TYPE","TARGETLESS_KEY","IS_PRODUCTION","_a","keys","matchesState","parentStateId","childStateId","delimiter","parentStateValue","toStateValue","childStateValue","isString","every","key","getEventType","event","type","Error","getActionType","action","isFunction","name","toStatePath","stateId","isArray","toString","split","isStateLike","state","stateValue","pathToStateValue","statePath","marker","mapValues","collection","iteratee","result","collectionKeys","mapFilterValues","predicate","e_1","_b","_c","item","e_1_1","return","path","props","object","e_2","props_1","props_1_1","prop","e_2_1","nestedPath","accessorProp","e_3","props_2","props_2_1","e_3_1","toStatePaths","flatten","map","subStateValue","subPath","pathsToStateValue","paths","e_4","paths_1","paths_1_1","currentPath","e_4_1","array","toArrayStrict","toArray","undefined","mapContext","mapper","context","_event","e_5","data","subMapper","e_5_1","isBuiltInEvent","eventType","test","isPromiseLike","Promise","then","isBehavior","transition","partition","items","e_6","truthy","falsy","items_1","items_1_1","e_6_1","updateHistoryStates","hist","states","subHist","current","updateHistoryValue","updateContext","assignActions","warn","updatedContext","reduce","acc","assignAction","e_7","assignment","meta","partialUpdate","propAssignment","e_7_1","condition","message","console","args","toGuard","guardMap","isObservable","subscribe","symbolObservable","observable","interopSymbols","isMachine","isActor","uniqueId","currentId","toEventObject","payload","toSCXMLEvent","scxmlEvent","$$type","eventObject","toTransitionConfigArray","configLike","transitions","transitionLike","target","normalizeTarget","reportUnhandledExceptionOnInvocation","originalError","currentError","id","originalStackTrace","stack","stackTrace","evaluateGuard","machine","guard","guards","options","guardMeta","cond","condFn","toInvokeSource","src","toObserver","nextHandler","errorHandler","completionHandler","noop","isObserver","self","bind","complete","createInvokeId","stateNodeId","index","initEvent","getActionFunction","actionType","actionFunctionMap","toActionObject","actionObject","exec","toActionObjects","actions","subAction","toActivityDefinition","Internal","raise$1","resolveRaise","send$1","delay","resolveSend","ctx","delaysMap","resolvedEvent","resolvedDelay","configDelay","resolvedTarget","sendParent","Parent","sendTo","actor","sendUpdate","respond","_","__","origin","defaultLogExpr","expr","label","log$1","resolveLog","sendId","cancel$1","activity","activityDef","actorRef","resolveStop","actorRefOrString","resolvedActorRef","assign$1","isActionObject","delayRef","idSuffix","doneInvoke","DoneInvoke","getActions","get","forwardTo","originalTarget_1","_i","escalate","errorData","error$1","conds","pluckAssigns","actionBlocks","actionBlocks_1","actionBlocks_1_1","block","splice","resolveActions","currentState","currentContext","predictableExec","preserveActionOrder","preservedContexts","deferredToBlockEnd","handleAction","sendAction","delays","resolved","choose$1","chooseAction","matchedActions","find","resolvedActionsFromChoose","resolvedContextFromChoose","pure$1","resolvedActionsFromPure","resolvedContext","stop$1","resolvedActionObject","exec_1","contextIndex_1","_ctx","processBlock","resolvedActions","block_1","block_1_1","forEach","serviceStack","provide","service","fn","pop","consume","createNullActor","unsubscribe","getSnapshot","toJSON","createInvocableActor","invokeDefinition","invokeSrc","serviceCreator","services","resolvedData","tempActor","createDeferredActor","entity","deferred","initialState_1","withContext","initialState","isSpawnedActor","toActorRef","actorRefLike","isLeafNode","stateNode","getAllChildren","getChildren","filter","sn","getAllStateNodes","stateNodes","getConfiguration","prevStateNodes","_d","prevConfiguration","Set","prevAdjList","getAdjList","configuration","configuration_1","configuration_1_1","parent","has","add","adjList","configuration_2","configuration_2_1","initialStateNodes","_e","_f","child","configuration_3","configuration_3_1","getValueFromAdj","baseNode","childStateNodes","childStateNode","csn","Map","configuration_4","configuration_4_1","set","getValue","rootNode","config","iterable","some","member","nextEvents","ownEvents","isInFinalState","getMeta","getTagsFromConfiguration","tags","stateValuesEqual","a","b","aKeys","bKeys","isStateConfig","isState","bindActionToState","boundAction","State","_this","activities","events","_sessionid","historyValue","history","matches","toStrings","children","defineProperty","create","inert","valueKeys","jsonValues","hasTag","tag","can","transitionData","getTransitionData","defaultOptions","deferEvents","Scheduler","processingEvent","queue","initialized","initialize","callback","schedule","process","flushEvents","task","clear","nextCallback","shift","sessionIdIndex","registry","bookId","register","free","delete","getGlobal","globalThis","window","global","getDevTools","__xstate__","registerService","devTools","fromReducer","fromPromise","promiseFn","status","observers","observer","reason","spawnBehavior","behavior","mailbox","flushing","flush","event_1","actorCtx","handleError","DEFAULT_SPAWN_OPTIONS","sync","autoForward","InterpreterStatus","Interpreter","delayedEventsMap","listeners","contextListeners","stopListeners","doneListeners","eventListeners","sendListeners","NotStarted","_outgoingQueue","batch","Stopped","JSON","stringify","Running","scheduler","forward","nextState","_nextState","_state","immediate","isParent","sessionId","predictableActionArguments","_exec","actionOrExec","err","defer","invokeSource","source","spawn","spawnActivity","stopChild","logger","resolvedOptions","clock","resolvedId","_initialState","enumerable","configurable","execute","actionsConfig","listener","_g","_h","_j","_k","contextListener","finalChildStateNode","doneData","_l","_m","_stop","_stopChildren","onTransition","nextListenerOrObserver","completeListener","completeOnce","onDone","onStop","onEvent","onSend","onChange","off","_init","resolvedState","resolveState","attachDev","e_8","e_9","e_10","e_8_1","_o","e_9_1","_p","_q","clearTimeout","e_10_1","exitActions","sort","order","onExit","newState","changed","e_11","batchChanged","batchedActions","_loop_1","events_1","events_1_1","e_11_1","sender","nextEvent","e_12","e_12_1","setTimeout","removeChild","childId","spawnPromise","resolve","spawnCallback","spawnActor","spawnObservable","spawnMachine","childService","doneEvent","promise","canceled","response","errorEvent","strict","unsubscribed","receivers","emitted","receive","callbackStop","newListener","receiver","subscription","implementation","dispose","spawnEffect","__REDUX_DEVTOOLS_EXTENSION__","devToolsOptions","connect","autoPause","stateSanitizer","features","jump","skip","ms","interpret","resolveSpawnOptions","nameOrOptions","isLazyEntity","interpreter","simpleSrc","toInvokeDefinition","invokeConfig","onError","invokeDef","NULL_EVENT","STATE_IDENTIFIER","WILDCARD","EMPTY_OBJECT","isStateId","str","createDefaultOptions","validateArrayifiedTransitions","hasNonLastUnguardedTarget","eventText","StateNode","_context","_stateInfo","__xstatenode","__cache","relativeValue","initialStateValue","on","candidates","delayedTransitions","idMap","join","version","parallel","schema","description","initial","stateConfig","dfs","_transient","always","onEntry","entry","exit","invokeId","withConfig","definition","getDelayedTransitions","formatTransitions","getCandidates","eventName","transient","sameEventType","afterConfig","mutateEntryExit","configTransition","resolvedTransition","isNaN","delayedTransition","formatTransition","getStateNodes","getStateNode","subStateKeys","subStateNodes","subStateKey","handles","includes","stateFromConfig","transitionLeafNode","transitionCompoundNode","_transition","transitionParallelNode","transitionMap","subStateNode","stateTransitions","enabledTransitions","st","willTransition","entryNodes","entrySet","exitSet","nextStateNodes","selectedTransition","candidate","stateIn","in","isInState","getStateNodeById","guardPassed","allNextStateNodes","getRelativeStateNodes","isInternal","internal","reentryNodes","targetNode","getExternalReentryNodes","nodes","possibleAncestor","resolvedConfig","isDone","prevState","prevConfig","resolvedConfig_1","resolvedConfig_1_1","prevConfig_1","prevConfig_1_1","doneEvents","grandparent","parentNode","entryStates","exitStates","entryActions","invokeActions","stopActions","resolvedStateValue","getResolvedPath","stateTransition","resolveTransition","resolveRaisedTransition","originalEvent","currentActions","unshift","resolvedConfiguration","start$1","raisedEvents","nonRaisedActions","didUpdateContext","hasAlwaysTransitions","maybeNextState","raisedEvent","stateKey","resolvedStateId","getStateNodeByPath","arrayStatePath","currentStateNode","stateIdentifier","getInitialState","historyConfig","relativeStateId","resolveHistory","initialStateNodePaths","initialPath","getFromRelativePath","relativePath","childStatePath","relativeStateValue","historyTarget","relativeChildPath","subHistoryValue","subStatePath","childStateIds","stateIds","resolveTarget","_target","isInternalTarget","targetStateNode","transitionConfig","normalizedTarget","onConfig","wildcardConfigs","strictTransitionConfigs_1","transitionConfigArray","eventlessConfig","doneConfig","String","settleTransitions","formattedTransitions","delayedTransitions_1","delayedTransitions_1_1","warned","Machine","initialContext","createMachine","mapState","stateMap","foundStateId","mappedStateId","matchState","patterns","defaultValue","patterns_1","patterns_1_1","createSchema","sendParent$1","sendUpdate$1","forwardTo$1","doneInvoke$1","defaultInstanceSettings","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","loop","direction","autoplay","timelineOffset","defaultTweenSettings","duration","endDelay","easing","round","validTransforms","cache","CSS","springs","minMax","val","min","max","Math","stringContains","text","applyArguments","func","is","arr","obj","pth","svg","SVGElement","inp","HTMLInputElement","dom","nodeType","fnc","und","nil","hex","rgb","hsl","col","parseEasingParameters","string","match","parseFloat","spring","params","mass","stiffness","damping","velocity","w0","sqrt","zeta","wd","solver","progress","exp","cos","sin","getDuration","cached","frame","elapsed","rest","steps","ceil","bezier","kSplineTableSize","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","abs","newtonRaphsonIterate","aGuessT","currentSlope","mY1","mY2","sampleValues","Float32Array","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","x","penner","eases","linear","functionEasings","Sine","PI","Circ","Back","Bounce","pow2","pow","Elastic","amplitude","period","asin","baseEasings","easeIn","parseEasings","ease","selectString","document","querySelectorAll","filterArray","len","thisArg","flattenArray","NodeList","HTMLCollection","arrayContains","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","rgbToRgba","rgbValue","hexToRgba","hexValue","rgx","replace","g","parseInt","hslToRgba","hslValue","h","hue2rgb","q","colorToRgb","getUnit","getTransformUnit","propName","getFunctionValue","animatable","total","getAttribute","el","convertPxToUnit","unit","valueUnit","baseline","tempEl","createElement","tagName","parentEl","body","appendChild","style","position","width","factor","offsetWidth","convertedUnit","getCSSValue","uppercasePropName","toLowerCase","getComputedStyle","getPropertyValue","getAnimationType","getElementTransforms","transform","reg","transforms","getTransformValue","defaultVal","list","getOriginalTargetValue","getRelativeValue","operator","u","y","validateValue","originalUnit","unitLess","substr","getDistance","p1","p2","getCircleLength","getRectLength","getLineLength","getPolylineLength","points","totalLength","previousPos","numberOfItems","currentPos","getItem","getPolygonLength","getTotalLength","setDashoffset","pathLength","setAttribute","getParentSvgEl","getParentSvg","pathEl","svgData","parentSvgEl","rect","getBoundingClientRect","viewBoxAttr","height","viewBox","w","vW","vH","getPath","percent","property","getPathProgress","isPathTargetInsideSVG","point","offset","getPointAtLength","p0","scaleX","scaleY","atan2","decomposeValue","original","numbers","Number","strings","parseTargets","targets","targetsArray","pos","getAnimatables","parsed","normalizePropertyTweens","tweenSettings","settings","isFromTo","propArray","v","k","flattenKeyframes","keyframes","propertyNames","properties","newKey","getProperties","tweens","normalizeTweenValues","tween","normalizeTweens","previousTween","tweenValue","toUnit","originalValue","previousValue","fromUnit","end","isPath","isColor","setProgressValue","css","attribute","manual","last","setTargetsValue","animatables","animType","createAnimation","lastTween","getAnimations","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","instanceID","createNewInstance","instanceSettings","activeInstances","engine","raf","play","isDocumentHidden","anime","suspendWhenDocumentHidden","requestAnimationFrame","step","activeInstancesLength","activeInstance","paused","tick","handleVisibilityChange","cancelAnimationFrame","instance","_onDocumentVisibility","addEventListener","hidden","startTime","lastTime","now","childrenLength","makePromise","_resolve","finished","toggleInstanceDirection","reversed","adjustTime","time","resetTime","currentTime","speed","seekChild","seek","syncInstanceChildren","reversePlayback","i$1","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","toNumbersLength","toNumber","fromNumber","stringsLength","n$1","currentValue","setCallback","cb","passThrough","countIteration","remaining","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","began","loopBegan","changeBegan","changeCompleted","completed","reset","pause","reverse","restart","remove","removeTargetsFromInstance","removeTargetsFromAnimations","c","childAnimations","removeTargetsFromActiveInstances","stagger","grid","axis","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","values","maxValue","fromX","fromY","floor","toX","toY","distanceX","distanceY","spacing","timeline","tl","instanceParams","tlIndex","ins","insParams","tlDuration","running","convertPx","random","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","generated","js","hmrApply","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","overlay","createErrorOverlay","getElementById","innerText","innerHTML","getParents","modules","parents","d","dep","Function","deps"],"mappings":"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","file":"app.c61986b1.js","sourceRoot":"..\\src","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\n\nexport { __assign, __read, __rest, __spreadArray, __values };\n","var ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"Start\"] = \"xstate.start\";\n  ActionTypes[\"Stop\"] = \"xstate.stop\";\n  ActionTypes[\"Raise\"] = \"xstate.raise\";\n  ActionTypes[\"Send\"] = \"xstate.send\";\n  ActionTypes[\"Cancel\"] = \"xstate.cancel\";\n  ActionTypes[\"NullEvent\"] = \"\";\n  ActionTypes[\"Assign\"] = \"xstate.assign\";\n  ActionTypes[\"After\"] = \"xstate.after\";\n  ActionTypes[\"DoneState\"] = \"done.state\";\n  ActionTypes[\"DoneInvoke\"] = \"done.invoke\";\n  ActionTypes[\"Log\"] = \"xstate.log\";\n  ActionTypes[\"Init\"] = \"xstate.init\";\n  ActionTypes[\"Invoke\"] = \"xstate.invoke\";\n  ActionTypes[\"ErrorExecution\"] = \"error.execution\";\n  ActionTypes[\"ErrorCommunication\"] = \"error.communication\";\n  ActionTypes[\"ErrorPlatform\"] = \"error.platform\";\n  ActionTypes[\"ErrorCustom\"] = \"xstate.error\";\n  ActionTypes[\"Update\"] = \"xstate.update\";\n  ActionTypes[\"Pure\"] = \"xstate.pure\";\n  ActionTypes[\"Choose\"] = \"xstate.choose\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar SpecialTargets;\n\n(function (SpecialTargets) {\n  SpecialTargets[\"Parent\"] = \"#_parent\";\n  SpecialTargets[\"Internal\"] = \"#_internal\";\n})(SpecialTargets || (SpecialTargets = {}));\n\nexport { ActionTypes, SpecialTargets };\n","import { ActionTypes } from './types.js';\n\nvar start = ActionTypes.Start;\nvar stop = ActionTypes.Stop;\nvar raise = ActionTypes.Raise;\nvar send = ActionTypes.Send;\nvar cancel = ActionTypes.Cancel;\nvar nullEvent = ActionTypes.NullEvent;\nvar assign = ActionTypes.Assign;\nvar after = ActionTypes.After;\nvar doneState = ActionTypes.DoneState;\nvar log = ActionTypes.Log;\nvar init = ActionTypes.Init;\nvar invoke = ActionTypes.Invoke;\nvar errorExecution = ActionTypes.ErrorExecution;\nvar errorPlatform = ActionTypes.ErrorPlatform;\nvar error = ActionTypes.ErrorCustom;\nvar update = ActionTypes.Update;\nvar choose = ActionTypes.Choose;\nvar pure = ActionTypes.Pure;\n\nexport { after, assign, cancel, choose, doneState, error, errorExecution, errorPlatform, init, invoke, log, nullEvent, pure, raise, send, start, stop, update };\n","var STATE_DELIMITER = '.';\nvar EMPTY_ACTIVITY_MAP = {};\nvar DEFAULT_GUARD_TYPE = 'xstate.guard';\nvar TARGETLESS_KEY = '';\n\nexport { DEFAULT_GUARD_TYPE, EMPTY_ACTIVITY_MAP, STATE_DELIMITER, TARGETLESS_KEY };\n","var IS_PRODUCTION = process.env.NODE_ENV === 'production';\n\nexport { IS_PRODUCTION };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar _a;\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return Object.keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\".concat(event) : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction getActionType(action) {\n  try {\n    return isString(action) || typeof action === 'number' ? \"\".concat(action) : isFunction(action) ? action.name : action.type;\n  } catch (e) {\n    throw new Error('Actions must be strings or objects with a string action.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\".concat(stateId, \"' is not a valid state path.\"));\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = Object.keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(Object.keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction pathsToStateValue(paths) {\n  var e_4, _a;\n\n  var result = {};\n\n  if (paths && paths.length === 1 && paths[0].length === 1) {\n    return paths[0][0];\n  }\n\n  try {\n    for (var paths_1 = __values(paths), paths_1_1 = paths_1.next(); !paths_1_1.done; paths_1_1 = paths_1.next()) {\n      var currentPath = paths_1_1.value;\n      var marker = result; // tslint:disable-next-line:prefer-for-of\n\n      for (var i = 0; i < currentPath.length; i++) {\n        var subPath = currentPath[i];\n\n        if (i === currentPath.length - 2) {\n          marker[subPath] = currentPath[i + 1];\n          break;\n        }\n\n        marker[subPath] = marker[subPath] || {};\n        marker = marker[subPath];\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (paths_1_1 && !paths_1_1.done && (_a = paths_1.return)) _a.call(paths_1);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spreadArray([], __read(array), false));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\nfunction isBehavior(value) {\n  return value !== null && typeof value === 'object' && 'transition' in value && typeof value.transition === 'function';\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(Object.keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \".concat(message)];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n}\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}(); // TODO: to be removed in v5, left it out just to minimize the scope of the change and maintain compatibility with older versions of integration paackages\n\nvar interopSymbols = (_a = {}, _a[symbolObservable] = function () {\n  return this;\n}, _a[Symbol.observable] = function () {\n  return this;\n}, _a);\nfunction isMachine(value) {\n  return !!value && '__xstatenode' in value;\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\".concat(originalError.stack, \"'\") : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\".concat(id, \"', error was '\").concat(originalError, \"'.\").concat(originalStackTrace));\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\".concat(currentError.stack, \"'\") : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\".concat(id, \"'. \") + \"Original error: '\".concat(originalError, \"'. \").concat(originalStackTrace, \" Current error is '\").concat(currentError, \"'.\").concat(stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return ((guards === null || guards === void 0 ? void 0 : guards[guard.name]) || guard.predicate)(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards === null || guards === void 0 ? void 0 : guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\".concat(guard.type, \"' is not implemented on machine '\").concat(machine.id, \"'.\"));\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  var noop = function () {};\n\n  var isObserver = typeof nextHandler === 'object';\n  var self = isObserver ? nextHandler : null;\n  return {\n    next: ((isObserver ? nextHandler.next : nextHandler) || noop).bind(self),\n    error: ((isObserver ? nextHandler.error : errorHandler) || noop).bind(self),\n    complete: ((isObserver ? nextHandler.complete : completionHandler) || noop).bind(self)\n  };\n}\nfunction createInvokeId(stateNodeId, index) {\n  return \"\".concat(stateNodeId, \":invocation[\").concat(index, \"]\");\n}\n\nexport { createInvokeId, evaluateGuard, flatten, getActionType, getEventType, interopSymbols, isActor, isArray, isBehavior, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, pathsToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };\n","import { __assign, __spreadArray, __read, __values } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { init, send as send$1, raise as raise$1, update, log as log$1, cancel as cancel$1, assign as assign$1, error as error$1, stop as stop$1, pure as pure$1, choose as choose$1 } from './actionTypes.js';\nimport * as actionTypes from './actionTypes.js';\nexport { actionTypes };\nimport { toSCXMLEvent, isString, isFunction, toEventObject, getEventType, updateContext, flatten, isArray, toArray, toGuard, evaluateGuard, warn } from './utils.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar initEvent = /*#__PURE__*/toSCXMLEvent({\n  type: init\n});\nfunction getActionFunction(actionType, actionFunctionMap) {\n  return actionFunctionMap ? actionFunctionMap[actionType] || undefined : undefined;\n}\nfunction toActionObject(action, actionFunctionMap) {\n  var actionObject;\n\n  if (isString(action) || typeof action === 'number') {\n    var exec = getActionFunction(action, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = {\n        type: action,\n        exec: exec\n      };\n    } else if (exec) {\n      actionObject = exec;\n    } else {\n      actionObject = {\n        type: action,\n        exec: undefined\n      };\n    }\n  } else if (isFunction(action)) {\n    actionObject = {\n      // Convert action to string if unnamed\n      type: action.name || action.toString(),\n      exec: action\n    };\n  } else {\n    var exec = getActionFunction(action.type, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = __assign(__assign({}, action), {\n        exec: exec\n      });\n    } else if (exec) {\n      var actionType = exec.type || action.type;\n      actionObject = __assign(__assign(__assign({}, exec), action), {\n        type: actionType\n      });\n    } else {\n      actionObject = action;\n    }\n  }\n\n  return actionObject;\n}\nvar toActionObjects = function (action, actionFunctionMap) {\n  if (!action) {\n    return [];\n  }\n\n  var actions = isArray(action) ? action : [action];\n  return actions.map(function (subAction) {\n    return toActionObject(subAction, actionFunctionMap);\n  });\n};\nfunction toActivityDefinition(action) {\n  var actionObject = toActionObject(action);\n  return __assign(__assign({\n    id: isString(action) ? action : actionObject.id\n  }, actionObject), {\n    type: actionObject.type\n  });\n}\n/**\r\n * Raises an event. This places the event in the internal event queue, so that\r\n * the event is immediately consumed by the machine in the current step.\r\n *\r\n * @param eventType The event to raise.\r\n */\n\nfunction raise(event) {\n  if (!isString(event)) {\n    return send(event, {\n      to: SpecialTargets.Internal\n    });\n  }\n\n  return {\n    type: raise$1,\n    event: event\n  };\n}\nfunction resolveRaise(action) {\n  return {\n    type: raise$1,\n    _event: toSCXMLEvent(action.event)\n  };\n}\n/**\r\n * Sends an event. This returns an action that will be read by an interpreter to\r\n * send the event in the next step, after the current step is finished executing.\r\n *\r\n * @param event The event to send.\r\n * @param options Options to pass into the send event:\r\n *  - `id` - The unique send event identifier (used with `cancel()`).\r\n *  - `delay` - The number of milliseconds to delay the sending of the event.\r\n *  - `to` - The target of this event (by default, the machine the event was sent from).\r\n */\n\nfunction send(event, options) {\n  return {\n    to: options ? options.to : undefined,\n    type: send$1,\n    event: isFunction(event) ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    id: options && options.id !== undefined ? options.id : isFunction(event) ? event.name : getEventType(event)\n  };\n}\nfunction resolveSend(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  }; // TODO: helper function for resolving Expr\n\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  var resolvedTarget = isFunction(action.to) ? action.to(ctx, _event.data, meta) : action.to;\n  return __assign(__assign({}, action), {\n    to: resolvedTarget,\n    _event: resolvedEvent,\n    event: resolvedEvent.data,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event to this machine's parent.\r\n *\r\n * @param event The event to send to the parent machine.\r\n * @param options Options to pass into the send event.\r\n */\n\nfunction sendParent(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n/**\r\n * Sends an event to an actor.\r\n *\r\n * @param actor The `ActorRef` to send the event to.\r\n * @param event The event to send, or an expression that evaluates to the event to send\r\n * @param options Send action options\r\n * @returns An XState send action object\r\n */\n\nfunction sendTo(actor, event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: actor\n  }));\n}\n/**\r\n * Sends an update event to this machine's parent.\r\n */\n\nfunction sendUpdate() {\n  return sendParent(update);\n}\n/**\r\n * Sends an event back to the sender of the original event.\r\n *\r\n * @param event The event to send back to the sender\r\n * @param options Options to pass into the send event\r\n */\n\nfunction respond(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: function (_, __, _a) {\n      var _event = _a._event;\n      return _event.origin; // TODO: handle when _event.origin is undefined\n    }\n  }));\n}\n\nvar defaultLogExpr = function (context, event) {\n  return {\n    context: context,\n    event: event\n  };\n};\n/**\r\n *\r\n * @param expr The expression function to evaluate which will be logged.\r\n *  Takes in 2 arguments:\r\n *  - `ctx` - the current state context\r\n *  - `event` - the event that caused this action to be executed.\r\n * @param label The label to give to the logged expression.\r\n */\n\n\nfunction log(expr, label) {\n  if (expr === void 0) {\n    expr = defaultLogExpr;\n  }\n\n  return {\n    type: log$1,\n    label: label,\n    expr: expr\n  };\n}\nvar resolveLog = function (action, ctx, _event) {\n  return __assign(__assign({}, action), {\n    value: isString(action.expr) ? action.expr : action.expr(ctx, _event.data, {\n      _event: _event\n    })\n  });\n};\n/**\r\n * Cancels an in-flight `send(...)` action. A canceled sent action will not\r\n * be executed, nor will its event be sent, unless it has already been sent\r\n * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).\r\n *\r\n * @param sendId The `id` of the `send(...)` action to cancel.\r\n */\n\nvar cancel = function (sendId) {\n  return {\n    type: cancel$1,\n    sendId: sendId\n  };\n};\n/**\r\n * Starts an activity.\r\n *\r\n * @param activity The activity to start.\r\n */\n\nfunction start(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Start,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Stops an activity.\r\n *\r\n * @param actorRef The activity to stop.\r\n */\n\nfunction stop(actorRef) {\n  var activity = isFunction(actorRef) ? actorRef : toActivityDefinition(actorRef);\n  return {\n    type: ActionTypes.Stop,\n    activity: activity,\n    exec: undefined\n  };\n}\nfunction resolveStop(action, context, _event) {\n  var actorRefOrString = isFunction(action.activity) ? action.activity(context, _event.data) : action.activity;\n  var resolvedActorRef = typeof actorRefOrString === 'string' ? {\n    id: actorRefOrString\n  } : actorRefOrString;\n  var actionObject = {\n    type: ActionTypes.Stop,\n    activity: resolvedActorRef\n  };\n  return actionObject;\n}\n/**\r\n * Updates the current context of the machine.\r\n *\r\n * @param assignment An object that represents the partial context to update.\r\n */\n\nvar assign = function (assignment) {\n  return {\n    type: assign$1,\n    assignment: assignment\n  };\n};\nfunction isActionObject(action) {\n  return typeof action === 'object' && 'type' in action;\n}\n/**\r\n * Returns an event type that represents an implicit event that\r\n * is sent after the specified `delay`.\r\n *\r\n * @param delayRef The delay in milliseconds\r\n * @param id The state node ID where this event is handled\r\n */\n\nfunction after(delayRef, id) {\n  var idSuffix = id ? \"#\".concat(id) : '';\n  return \"\".concat(ActionTypes.After, \"(\").concat(delayRef, \")\").concat(idSuffix);\n}\n/**\r\n * Returns an event that represents that a final state node\r\n * has been reached in the parent state node.\r\n *\r\n * @param id The final state node's parent state node `id`\r\n * @param data The data to pass into the event\r\n */\n\nfunction done(id, data) {\n  var type = \"\".concat(ActionTypes.DoneState, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Returns an event that represents that an invoked service has terminated.\r\n *\r\n * An invoked service is terminated when it has reached a top-level final state node,\r\n * but not when it is canceled.\r\n *\r\n * @param id The final state node ID\r\n * @param data The data to pass into the event\r\n */\n\nfunction doneInvoke(id, data) {\n  var type = \"\".concat(ActionTypes.DoneInvoke, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction error(id, data) {\n  var type = \"\".concat(ActionTypes.ErrorPlatform, \".\").concat(id);\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\nfunction pure(getActions) {\n  return {\n    type: ActionTypes.Pure,\n    get: getActions\n  };\n}\n/**\r\n * Forwards (sends) an event to a specified service.\r\n *\r\n * @param target The target service to forward the event to.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction forwardTo(target, options) {\n  if (!IS_PRODUCTION && (!target || typeof target === 'function')) {\n    var originalTarget_1 = target;\n\n    target = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var resolvedTarget = typeof originalTarget_1 === 'function' ? originalTarget_1.apply(void 0, __spreadArray([], __read(args), false)) : originalTarget_1;\n\n      if (!resolvedTarget) {\n        throw new Error(\"Attempted to forward event to undefined actor. This risks an infinite loop in the sender.\");\n      }\n\n      return resolvedTarget;\n    };\n  }\n\n  return send(function (_, event) {\n    return event;\n  }, __assign(__assign({}, options), {\n    to: target\n  }));\n}\n/**\r\n * Escalates an error by sending it as an event to this machine's parent.\r\n *\r\n * @param errorData The error data to send, or the expression function that\r\n * takes in the `context`, `event`, and `meta`, and returns the error data to send.\r\n * @param options Options to pass into the send action creator.\r\n */\n\nfunction escalate(errorData, options) {\n  return sendParent(function (context, event, meta) {\n    return {\n      type: error$1,\n      data: isFunction(errorData) ? errorData(context, event, meta) : errorData\n    };\n  }, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\nfunction choose(conds) {\n  return {\n    type: ActionTypes.Choose,\n    conds: conds\n  };\n}\n\nvar pluckAssigns = function (actionBlocks) {\n  var e_1, _a;\n\n  var assignActions = [];\n\n  try {\n    for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n      var block = actionBlocks_1_1.value;\n      var i = 0;\n\n      while (i < block.length) {\n        if (block[i].type === assign$1) {\n          assignActions.push(block[i]);\n          block.splice(i, 1);\n          continue;\n        }\n\n        i++;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return assignActions;\n};\n\nfunction resolveActions(machine, currentState, currentContext, _event, actionBlocks, predictableExec, preserveActionOrder) {\n  if (preserveActionOrder === void 0) {\n    preserveActionOrder = false;\n  }\n\n  var assignActions = preserveActionOrder ? [] : pluckAssigns(actionBlocks);\n  var updatedContext = assignActions.length ? updateContext(currentContext, _event, assignActions, currentState) : currentContext;\n  var preservedContexts = preserveActionOrder ? [currentContext] : undefined;\n  var deferredToBlockEnd = [];\n\n  function handleAction(actionObject) {\n    var _a;\n\n    switch (actionObject.type) {\n      case raise$1:\n        {\n          return resolveRaise(actionObject);\n        }\n\n      case send$1:\n        var sendAction = resolveSend(actionObject, updatedContext, _event, machine.options.delays); // TODO: fix ActionTypes.Init\n\n        if (!IS_PRODUCTION) {\n          // warn after resolving as we can create better contextual message here\n          warn(!isString(actionObject.delay) || typeof sendAction.delay === 'number', // tslint:disable-next-line:max-line-length\n          \"No delay reference for delay expression '\".concat(actionObject.delay, \"' was found on machine '\").concat(machine.id, \"'\"));\n        }\n\n        if (predictableExec && sendAction.to !== SpecialTargets.Internal) {\n          deferredToBlockEnd.push(sendAction);\n        }\n\n        return sendAction;\n\n      case log$1:\n        {\n          var resolved = resolveLog(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, updatedContext, _event);\n          return resolved;\n        }\n\n      case choose$1:\n        {\n          var chooseAction = actionObject;\n          var matchedActions = (_a = chooseAction.conds.find(function (condition) {\n            var guard = toGuard(condition.cond, machine.options.guards);\n            return !guard || evaluateGuard(machine, guard, updatedContext, _event, !predictableExec ? currentState : undefined);\n          })) === null || _a === void 0 ? void 0 : _a.actions;\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _b = __read(resolveActions(machine, currentState, updatedContext, _event, [toActionObjects(toArray(matchedActions), machine.options.actions)], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromChoose = _b[0],\n              resolvedContextFromChoose = _b[1];\n\n          updatedContext = resolvedContextFromChoose;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromChoose;\n        }\n\n      case pure$1:\n        {\n          var matchedActions = actionObject.get(updatedContext, _event.data);\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var _c = __read(resolveActions(machine, currentState, updatedContext, _event, [toActionObjects(toArray(matchedActions), machine.options.actions)], predictableExec, preserveActionOrder), 2),\n              resolvedActionsFromPure = _c[0],\n              resolvedContext = _c[1];\n\n          updatedContext = resolvedContext;\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          return resolvedActionsFromPure;\n        }\n\n      case stop$1:\n        {\n          var resolved = resolveStop(actionObject, updatedContext, _event);\n          predictableExec === null || predictableExec === void 0 ? void 0 : predictableExec(resolved, currentContext, _event);\n          return resolved;\n        }\n\n      case assign$1:\n        {\n          updatedContext = updateContext(updatedContext, _event, [actionObject], !predictableExec ? currentState : undefined);\n          preservedContexts === null || preservedContexts === void 0 ? void 0 : preservedContexts.push(updatedContext);\n          break;\n        }\n\n      default:\n        var resolvedActionObject = toActionObject(actionObject, machine.options.actions);\n        var exec_1 = resolvedActionObject.exec;\n\n        if (predictableExec) {\n          predictableExec(resolvedActionObject, updatedContext, _event);\n        } else if (exec_1 && preservedContexts) {\n          var contextIndex_1 = preservedContexts.length - 1;\n          resolvedActionObject = __assign(__assign({}, resolvedActionObject), {\n            exec: function (_ctx) {\n              var args = [];\n\n              for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n              }\n\n              exec_1.apply(void 0, __spreadArray([preservedContexts[contextIndex_1]], __read(args), false));\n            }\n          });\n        }\n\n        return resolvedActionObject;\n    }\n  }\n\n  function processBlock(block) {\n    var e_2, _a;\n\n    var resolvedActions = [];\n\n    try {\n      for (var block_1 = __values(block), block_1_1 = block_1.next(); !block_1_1.done; block_1_1 = block_1.next()) {\n        var action = block_1_1.value;\n        var resolved = handleAction(action);\n\n        if (resolved) {\n          resolvedActions = resolvedActions.concat(resolved);\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (block_1_1 && !block_1_1.done && (_a = block_1.return)) _a.call(block_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    deferredToBlockEnd.forEach(function (action) {\n      predictableExec(action, updatedContext, _event);\n    });\n    deferredToBlockEnd.length = 0;\n    return resolvedActions;\n  }\n\n  var resolvedActions = flatten(actionBlocks.map(processBlock));\n  return [resolvedActions, updatedContext];\n}\n\nexport { after, assign, cancel, choose, done, doneInvoke, error, escalate, forwardTo, getActionFunction, initEvent, isActionObject, log, pure, raise, resolveActions, resolveLog, resolveRaise, resolveSend, resolveStop, respond, send, sendParent, sendTo, sendUpdate, start, stop, toActionObject, toActionObjects, toActivityDefinition };\n","/**\r\n * Maintains a stack of the current service in scope.\r\n * This is used to provide the correct service to spawn().\r\n */\nvar serviceStack = [];\nvar provide = function (service, fn) {\n  serviceStack.push(service);\n  var result = fn(service);\n  serviceStack.pop();\n  return result;\n};\nvar consume = function (fn) {\n  return fn(serviceStack[serviceStack.length - 1]);\n};\n\nexport { consume, provide };\n","import { __assign } from './_virtual/_tslib.js';\nimport { symbolObservable, toInvokeSource, mapContext, isMachine } from './utils.js';\nimport { provide } from './serviceScope.js';\n\nfunction createNullActor(id) {\n  var _a;\n\n  return _a = {\n    id: id,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    getSnapshot: function () {\n      return undefined;\n    },\n    toJSON: function () {\n      return {\n        id: id\n      };\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a;\n}\n/**\r\n * Creates a deferred actor that is able to be invoked given the provided\r\n * invocation information in its `.meta` value.\r\n *\r\n * @param invokeDefinition The meta information needed to invoke the actor.\r\n */\n\nfunction createInvocableActor(invokeDefinition, machine, context, _event) {\n  var _a;\n\n  var invokeSrc = toInvokeSource(invokeDefinition.src);\n  var serviceCreator = (_a = machine === null || machine === void 0 ? void 0 : machine.options.services) === null || _a === void 0 ? void 0 : _a[invokeSrc.type];\n  var resolvedData = invokeDefinition.data ? mapContext(invokeDefinition.data, context, _event) : undefined;\n  var tempActor = serviceCreator ? createDeferredActor(serviceCreator, invokeDefinition.id, resolvedData) : createNullActor(invokeDefinition.id); // @ts-ignore\n\n  tempActor.meta = invokeDefinition;\n  return tempActor;\n}\nfunction createDeferredActor(entity, id, data) {\n  var tempActor = createNullActor(id); // @ts-ignore\n\n  tempActor.deferred = true;\n\n  if (isMachine(entity)) {\n    // \"mute\" the existing service scope so potential spawned actors within the `.initialState` stay deferred here\n    var initialState_1 = tempActor.state = provide(undefined, function () {\n      return (data ? entity.withContext(data) : entity).initialState;\n    });\n\n    tempActor.getSnapshot = function () {\n      return initialState_1;\n    };\n  }\n\n  return tempActor;\n}\nfunction isActor(item) {\n  try {\n    return typeof item.send === 'function';\n  } catch (e) {\n    return false;\n  }\n}\nfunction isSpawnedActor(item) {\n  return isActor(item) && 'id' in item;\n} // TODO: refactor the return type, this could be written in a better way but it's best to avoid unneccessary breaking changes now\n\nfunction toActorRef(actorRefLike) {\n  var _a;\n\n  return __assign((_a = {\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    id: 'anonymous',\n    getSnapshot: function () {\n      return undefined;\n    }\n  }, _a[symbolObservable] = function () {\n    return this;\n  }, _a), actorRefLike);\n}\n\nexport { createDeferredActor, createInvocableActor, createNullActor, isActor, isSpawnedActor, toActorRef };\n","import { __values, __spreadArray, __read } from './_virtual/_tslib.js';\nimport { flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\nfunction getAllChildren(stateNode) {\n  return Object.keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  });\n}\nfunction getChildren(stateNode) {\n  return getAllChildren(stateNode).filter(function (sn) {\n    return sn.type !== 'history';\n  });\n}\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\nfunction nextEvents(configuration) {\n  return __spreadArray([], __read(new Set(flatten(__spreadArray([], __read(configuration.map(function (sn) {\n    return sn.ownEvents;\n  })), false)))), false);\n}\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\nfunction getMeta(configuration) {\n  if (configuration === void 0) {\n    configuration = [];\n  }\n\n  return configuration.reduce(function (acc, stateNode) {\n    if (stateNode.meta !== undefined) {\n      acc[stateNode.id] = stateNode.meta;\n    }\n\n    return acc;\n  }, {});\n}\nfunction getTagsFromConfiguration(configuration) {\n  return new Set(flatten(configuration.map(function (sn) {\n    return sn.tags;\n  })));\n}\n\nexport { getAdjList, getAllChildren, getAllStateNodes, getChildren, getConfiguration, getMeta, getTagsFromConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };\n","import { __assign, __spreadArray, __read, __rest } from './_virtual/_tslib.js';\nimport { EMPTY_ACTIVITY_MAP } from './constants.js';\nimport { isString, matchesState, warn } from './utils.js';\nimport { getMeta, nextEvents } from './stateUtils.js';\nimport { initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction stateValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  if (isString(a) || isString(b)) {\n    return a === b;\n  }\n\n  var aKeys = Object.keys(a);\n  var bKeys = Object.keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(function (key) {\n    return stateValuesEqual(a[key], b[key]);\n  });\n}\nfunction isStateConfig(state) {\n  if (typeof state !== 'object' || state === null) {\n    return false;\n  }\n\n  return 'value' in state && '_event' in state;\n}\n/**\r\n * @deprecated Use `isStateConfig(object)` or `state instanceof State` instead.\r\n */\n\nvar isState = isStateConfig;\nfunction bindActionToState(action, state) {\n  var exec = action.exec;\n\n  var boundAction = __assign(__assign({}, action), {\n    exec: exec !== undefined ? function () {\n      return exec(state.context, state.event, {\n        action: action,\n        state: state,\n        _event: state._event\n      });\n    } : undefined\n  });\n\n  return boundAction;\n}\n\nvar State =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new State instance.\r\n   * @param value The state value\r\n   * @param context The extended state\r\n   * @param historyValue The tree representing historical values of the state nodes\r\n   * @param history The previous state\r\n   * @param actions An array of action objects to execute as side-effects\r\n   * @param activities A mapping of activities and whether they are started (`true`) or stopped (`false`).\r\n   * @param meta\r\n   * @param events Internal event queue. Should be empty with run-to-completion semantics.\r\n   * @param configuration\r\n   */\n  function State(config) {\n    var _this = this;\n\n    var _a;\n\n    this.actions = [];\n    this.activities = EMPTY_ACTIVITY_MAP;\n    this.meta = {};\n    this.events = [];\n    this.value = config.value;\n    this.context = config.context;\n    this._event = config._event;\n    this._sessionid = config._sessionid;\n    this.event = this._event.data;\n    this.historyValue = config.historyValue;\n    this.history = config.history;\n    this.actions = config.actions || [];\n    this.activities = config.activities || EMPTY_ACTIVITY_MAP;\n    this.meta = getMeta(config.configuration);\n    this.events = config.events || [];\n    this.matches = this.matches.bind(this);\n    this.toStrings = this.toStrings.bind(this);\n    this.configuration = config.configuration;\n    this.transitions = config.transitions;\n    this.children = config.children;\n    this.done = !!config.done;\n    this.tags = (_a = Array.isArray(config.tags) ? new Set(config.tags) : config.tags) !== null && _a !== void 0 ? _a : new Set();\n    this.machine = config.machine;\n    Object.defineProperty(this, 'nextEvents', {\n      get: function () {\n        return nextEvents(_this.configuration);\n      }\n    });\n  }\n  /**\r\n   * Creates a new State instance for the given `stateValue` and `context`.\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.from = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (stateValue.context !== context) {\n        return new State({\n          value: stateValue.value,\n          context: context,\n          _event: stateValue._event,\n          _sessionid: null,\n          historyValue: stateValue.historyValue,\n          history: stateValue.history,\n          actions: [],\n          activities: stateValue.activities,\n          meta: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {}\n        });\n      }\n\n      return stateValue;\n    }\n\n    var _event = initEvent;\n    return new State({\n      value: stateValue,\n      context: context,\n      _event: _event,\n      _sessionid: null,\n      historyValue: undefined,\n      history: undefined,\n      actions: [],\n      activities: undefined,\n      meta: undefined,\n      events: [],\n      configuration: [],\n      transitions: [],\n      children: {}\n    });\n  };\n  /**\r\n   * Creates a new State instance for the given `config`.\r\n   * @param config The state config\r\n   */\n\n\n  State.create = function (config) {\n    return new State(config);\n  };\n  /**\r\n   * Creates a new `State` instance for the given `stateValue` and `context` with no actions (side-effects).\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.inert = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (!stateValue.actions.length) {\n        return stateValue;\n      }\n\n      var _event = initEvent;\n      return new State({\n        value: stateValue.value,\n        context: context,\n        _event: _event,\n        _sessionid: null,\n        historyValue: stateValue.historyValue,\n        history: stateValue.history,\n        activities: stateValue.activities,\n        configuration: stateValue.configuration,\n        transitions: [],\n        children: {}\n      });\n    }\n\n    return State.from(stateValue, context);\n  };\n  /**\r\n   * Returns an array of all the string leaf state node paths.\r\n   * @param stateValue\r\n   * @param delimiter The character(s) that separate each subpath in the string state node path.\r\n   */\n\n\n  State.prototype.toStrings = function (stateValue, delimiter) {\n    var _this = this;\n\n    if (stateValue === void 0) {\n      stateValue = this.value;\n    }\n\n    if (delimiter === void 0) {\n      delimiter = '.';\n    }\n\n    if (isString(stateValue)) {\n      return [stateValue];\n    }\n\n    var valueKeys = Object.keys(stateValue);\n    return valueKeys.concat.apply(valueKeys, __spreadArray([], __read(valueKeys.map(function (key) {\n      return _this.toStrings(stateValue[key], delimiter).map(function (s) {\n        return key + delimiter + s;\n      });\n    })), false));\n  };\n\n  State.prototype.toJSON = function () {\n    var _a = this;\n        _a.configuration;\n        _a.transitions;\n        var tags = _a.tags;\n        _a.machine;\n        var jsonValues = __rest(_a, [\"configuration\", \"transitions\", \"tags\", \"machine\"]);\n\n    return __assign(__assign({}, jsonValues), {\n      tags: Array.from(tags)\n    });\n  };\n\n  State.prototype.matches = function (parentStateValue) {\n    return matchesState(parentStateValue, this.value);\n  };\n  /**\r\n   * Whether the current state configuration has a state node with the specified `tag`.\r\n   * @param tag\r\n   */\n\n\n  State.prototype.hasTag = function (tag) {\n    return this.tags.has(tag);\n  };\n  /**\r\n   * Determines whether sending the `event` will cause a non-forbidden transition\r\n   * to be selected, even if the transitions have no actions nor\r\n   * change the state value.\r\n   *\r\n   * @param event The event to test\r\n   * @returns Whether the event will cause a transition\r\n   */\n\n\n  State.prototype.can = function (event) {\n    var _a;\n\n    if (IS_PRODUCTION) {\n      warn(!!this.machine, \"state.can(...) used outside of a machine-created State object; this will always return false.\");\n    }\n\n    var transitionData = (_a = this.machine) === null || _a === void 0 ? void 0 : _a.getTransitionData(this, event);\n    return !!(transitionData === null || transitionData === void 0 ? void 0 : transitionData.transitions.length) && // Check that at least one transition is not forbidden\n    transitionData.transitions.some(function (t) {\n      return t.target !== undefined || t.actions.length;\n    });\n  };\n\n  return State;\n}();\n\nexport { State, bindActionToState, isState, isStateConfig, stateValuesEqual };\n","import { __assign } from './_virtual/_tslib.js';\n\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };\n","var children = /*#__PURE__*/new Map();\nvar sessionIdIndex = 0;\nvar registry = {\n  bookId: function () {\n    return \"x:\".concat(sessionIdIndex++);\n  },\n  register: function (id, actor) {\n    children.set(id, actor);\n    return id;\n  },\n  get: function (id) {\n    return children.get(id);\n  },\n  free: function (id) {\n    children.delete(id);\n  }\n};\n\nexport { registry };\n","import { IS_PRODUCTION } from './environment.js';\n\nfunction getGlobal() {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  if (!IS_PRODUCTION) {\n    console.warn('XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues');\n  }\n}\n\nfunction getDevTools() {\n  var global = getGlobal();\n\n  if (global && '__xstate__' in global) {\n    return global.__xstate__;\n  }\n\n  return undefined;\n}\n\nfunction registerService(service) {\n  if (!getGlobal()) {\n    return;\n  }\n\n  var devTools = getDevTools();\n\n  if (devTools) {\n    devTools.register(service);\n  }\n}\n\nexport { getGlobal, registerService };\n","import { error, doneInvoke } from './actions.js';\nimport { toActorRef } from './Actor.js';\nimport { toObserver } from './utils.js';\n\n/**\r\n * Returns an actor behavior from a reducer and its initial state.\r\n *\r\n * @param transition The pure reducer that returns the next state given the current state and event.\r\n * @param initialState The initial state of the reducer.\r\n * @returns An actor behavior\r\n */\n\nfunction fromReducer(transition, initialState) {\n  return {\n    transition: transition,\n    initialState: initialState\n  };\n}\nfunction fromPromise(promiseFn) {\n  var initialState = {\n    error: undefined,\n    data: undefined,\n    status: 'pending'\n  };\n  return {\n    transition: function (state, event, _a) {\n      var parent = _a.parent,\n          id = _a.id,\n          observers = _a.observers;\n\n      switch (event.type) {\n        case 'fulfill':\n          parent === null || parent === void 0 ? void 0 : parent.send(doneInvoke(id, event.data));\n          return {\n            error: undefined,\n            data: event.data,\n            status: 'fulfilled'\n          };\n\n        case 'reject':\n          parent === null || parent === void 0 ? void 0 : parent.send(error(id, event.error));\n          observers.forEach(function (observer) {\n            observer.error(event.error);\n          });\n          return {\n            error: event.error,\n            data: undefined,\n            status: 'rejected'\n          };\n\n        default:\n          return state;\n      }\n    },\n    initialState: initialState,\n    start: function (_a) {\n      var self = _a.self;\n      promiseFn().then(function (data) {\n        self.send({\n          type: 'fulfill',\n          data: data\n        });\n      }, function (reason) {\n        self.send({\n          type: 'reject',\n          error: reason\n        });\n      });\n      return initialState;\n    }\n  };\n}\nfunction spawnBehavior(behavior, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var state = behavior.initialState;\n  var observers = new Set();\n  var mailbox = [];\n  var flushing = false;\n\n  var flush = function () {\n    if (flushing) {\n      return;\n    }\n\n    flushing = true;\n\n    while (mailbox.length > 0) {\n      var event_1 = mailbox.shift();\n      state = behavior.transition(state, event_1, actorCtx);\n      observers.forEach(function (observer) {\n        return observer.next(state);\n      });\n    }\n\n    flushing = false;\n  };\n\n  var actor = toActorRef({\n    id: options.id,\n    send: function (event) {\n      mailbox.push(event);\n      flush();\n    },\n    getSnapshot: function () {\n      return state;\n    },\n    subscribe: function (next, handleError, complete) {\n      var observer = toObserver(next, handleError, complete);\n      observers.add(observer);\n      observer.next(state);\n      return {\n        unsubscribe: function () {\n          observers.delete(observer);\n        }\n      };\n    }\n  });\n  var actorCtx = {\n    parent: options.parent,\n    self: actor,\n    id: options.id || 'anonymous',\n    observers: observers\n  };\n  state = behavior.start ? behavior.start(actorCtx) : state;\n  return actor;\n}\n\nexport { fromPromise, fromReducer, spawnBehavior };\n","import { __values, __spreadArray, __read, __assign } from './_virtual/_tslib.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { isStateConfig, State, bindActionToState } from './State.js';\nimport { raise, send, errorPlatform, update, error as error$1, log, stop, start, cancel } from './actionTypes.js';\nimport { initEvent, doneInvoke, toActionObjects, resolveActions, error, getActionFunction } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { warn, mapContext, toObserver, isFunction, toSCXMLEvent, flatten, isPromiseLike, isObservable, isMachine, isBehavior, reportUnhandledExceptionOnInvocation, symbolObservable, isArray, toEventObject, isString, isActor, toInvokeSource, uniqueId } from './utils.js';\nimport { Scheduler } from './scheduler.js';\nimport { createDeferredActor, isSpawnedActor } from './Actor.js';\nimport { registry } from './registry.js';\nimport { getGlobal, registerService } from './devTools.js';\nimport { provide, consume } from './serviceScope.js';\nimport { spawnBehavior } from './behaviors.js';\n\nvar DEFAULT_SPAWN_OPTIONS = {\n  sync: false,\n  autoForward: false\n};\nvar InterpreterStatus;\n\n(function (InterpreterStatus) {\n  InterpreterStatus[InterpreterStatus[\"NotStarted\"] = 0] = \"NotStarted\";\n  InterpreterStatus[InterpreterStatus[\"Running\"] = 1] = \"Running\";\n  InterpreterStatus[InterpreterStatus[\"Stopped\"] = 2] = \"Stopped\";\n})(InterpreterStatus || (InterpreterStatus = {}));\n\nvar Interpreter =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new Interpreter instance (i.e., service) for the given machine with the provided options, if any.\r\n   *\r\n   * @param machine The machine to be interpreted\r\n   * @param options Interpreter options\r\n   */\n  function Interpreter(machine, options) {\n    if (options === void 0) {\n      options = Interpreter.defaultOptions;\n    }\n\n    var _this = this;\n\n    this.machine = machine;\n    this.delayedEventsMap = {};\n    this.listeners = new Set();\n    this.contextListeners = new Set();\n    this.stopListeners = new Set();\n    this.doneListeners = new Set();\n    this.eventListeners = new Set();\n    this.sendListeners = new Set();\n    /**\r\n     * Whether the service is started.\r\n     */\n\n    this.initialized = false;\n    this.status = InterpreterStatus.NotStarted;\n    this.children = new Map();\n    this.forwardTo = new Set();\n    this._outgoingQueue = [];\n    /**\r\n     * Alias for Interpreter.prototype.start\r\n     */\n\n    this.init = this.start;\n    /**\r\n     * Sends an event to the running interpreter to trigger a transition.\r\n     *\r\n     * An array of events (batched) can be sent as well, which will send all\r\n     * batched events to the running interpreter. The listeners will be\r\n     * notified only **once** when all events are processed.\r\n     *\r\n     * @param event The event(s) to send\r\n     */\n\n    this.send = function (event, payload) {\n      if (isArray(event)) {\n        _this.batch(event);\n\n        return _this.state;\n      }\n\n      var _event = toSCXMLEvent(toEventObject(event, payload));\n\n      if (_this.status === InterpreterStatus.Stopped) {\n        // do nothing\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\".concat(_event.name, \"\\\" was sent to stopped service \\\"\").concat(_this.machine.id, \"\\\". This service has already reached its final state, and will not transition.\\nEvent: \").concat(JSON.stringify(_event.data)));\n        }\n\n        return _this.state;\n      }\n\n      if (_this.status !== InterpreterStatus.Running && !_this.options.deferEvents) {\n        throw new Error(\"Event \\\"\".concat(_event.name, \"\\\" was sent to uninitialized service \\\"\").concat(_this.machine.id // tslint:disable-next-line:max-line-length\n        , \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\\nEvent: \").concat(JSON.stringify(_event.data)));\n      }\n\n      _this.scheduler.schedule(function () {\n        // Forward copy of event to child actors\n        _this.forward(_event);\n\n        var nextState = _this._nextState(_event);\n\n        _this.update(nextState, _event);\n      });\n\n      return _this._state; // TODO: deprecate (should return void)\n      // tslint:disable-next-line:semicolon\n    };\n\n    this.sendTo = function (event, to, immediate) {\n      var isParent = _this.parent && (to === SpecialTargets.Parent || _this.parent.id === to);\n      var target = isParent ? _this.parent : isString(to) ? _this.children.get(to) || registry.get(to) : isActor(to) ? to : undefined;\n\n      if (!target) {\n        if (!isParent) {\n          throw new Error(\"Unable to send event to child '\".concat(to, \"' from service '\").concat(_this.id, \"'.\"));\n        } // tslint:disable-next-line:no-console\n\n\n        if (!IS_PRODUCTION) {\n          warn(false, \"Service '\".concat(_this.id, \"' has no parent: unable to send event \").concat(event.type));\n        }\n\n        return;\n      }\n\n      if ('machine' in target) {\n        // perhaps those events should be rejected in the parent\n        // but atm it doesn't have easy access to all of the information that is required to do it reliably\n        if (_this.status !== InterpreterStatus.Stopped || _this.parent !== target || // we need to send events to the parent from exit handlers of a machine that reached its final state\n        _this.state.done) {\n          // Send SCXML events to machines\n          var scxmlEvent = __assign(__assign({}, event), {\n            name: event.name === error$1 ? \"\".concat(error(_this.id)) : event.name,\n            origin: _this.sessionId\n          });\n\n          if (!immediate && _this.machine.config.predictableActionArguments) {\n            _this._outgoingQueue.push([target, scxmlEvent]);\n          } else {\n            target.send(scxmlEvent);\n          }\n        }\n      } else {\n        // Send normal events to other targets\n        if (!immediate && _this.machine.config.predictableActionArguments) {\n          _this._outgoingQueue.push([target, event.data]);\n        } else {\n          target.send(event.data);\n        }\n      }\n    };\n\n    this._exec = function (action, context, _event, actionFunctionMap) {\n      if (actionFunctionMap === void 0) {\n        actionFunctionMap = _this.machine.options.actions;\n      }\n\n      var actionOrExec = action.exec || getActionFunction(action.type, actionFunctionMap);\n      var exec = isFunction(actionOrExec) ? actionOrExec : actionOrExec ? actionOrExec.exec : action.exec;\n\n      if (exec) {\n        try {\n          return exec(context, _event.data, !_this.machine.config.predictableActionArguments ? {\n            action: action,\n            state: _this.state,\n            _event: _event\n          } : {\n            action: action,\n            _event: _event\n          });\n        } catch (err) {\n          if (_this.parent) {\n            _this.parent.send({\n              type: 'xstate.error',\n              data: err\n            });\n          }\n\n          throw err;\n        }\n      }\n\n      switch (action.type) {\n        case send:\n          var sendAction = action;\n\n          if (typeof sendAction.delay === 'number') {\n            _this.defer(sendAction);\n\n            return;\n          } else {\n            if (sendAction.to) {\n              _this.sendTo(sendAction._event, sendAction.to, _event === initEvent);\n            } else {\n              _this.send(sendAction._event);\n            }\n          }\n\n          break;\n\n        case cancel:\n          _this.cancel(action.sendId);\n\n          break;\n\n        case start:\n          {\n            if (_this.status !== InterpreterStatus.Running) {\n              return;\n            }\n\n            var activity = action.activity; // If the activity will be stopped right after it's started\n            // (such as in transient states)\n            // don't bother starting the activity.\n\n            if ( // in v4 with `predictableActionArguments` invokes are called eagerly when the `this.state` still points to the previous state\n            !_this.machine.config.predictableActionArguments && !_this.state.activities[activity.id || activity.type]) {\n              break;\n            } // Invoked services\n\n\n            if (activity.type === ActionTypes.Invoke) {\n              var invokeSource = toInvokeSource(activity.src);\n              var serviceCreator = _this.machine.options.services ? _this.machine.options.services[invokeSource.type] : undefined;\n              var id = activity.id,\n                  data = activity.data;\n\n              if (!IS_PRODUCTION) {\n                warn(!('forward' in activity), // tslint:disable-next-line:max-line-length\n                \"`forward` property is deprecated (found in invocation of '\".concat(activity.src, \"' in in machine '\").concat(_this.machine.id, \"'). \") + \"Please use `autoForward` instead.\");\n              }\n\n              var autoForward = 'autoForward' in activity ? activity.autoForward : !!activity.forward;\n\n              if (!serviceCreator) {\n                // tslint:disable-next-line:no-console\n                if (!IS_PRODUCTION) {\n                  warn(false, \"No service found for invocation '\".concat(activity.src, \"' in machine '\").concat(_this.machine.id, \"'.\"));\n                }\n\n                return;\n              }\n\n              var resolvedData = data ? mapContext(data, context, _event) : undefined;\n\n              if (typeof serviceCreator === 'string') {\n                // TODO: warn\n                return;\n              }\n\n              var source = isFunction(serviceCreator) ? serviceCreator(context, _event.data, {\n                data: resolvedData,\n                src: invokeSource,\n                meta: activity.meta\n              }) : serviceCreator;\n\n              if (!source) {\n                // TODO: warn?\n                return;\n              }\n\n              var options = void 0;\n\n              if (isMachine(source)) {\n                source = resolvedData ? source.withContext(resolvedData) : source;\n                options = {\n                  autoForward: autoForward\n                };\n              }\n\n              _this.spawn(source, id, options);\n            } else {\n              _this.spawnActivity(activity);\n            }\n\n            break;\n          }\n\n        case stop:\n          {\n            _this.stopChild(action.activity.id);\n\n            break;\n          }\n\n        case log:\n          var label = action.label,\n              value = action.value;\n\n          if (label) {\n            _this.logger(label, value);\n          } else {\n            _this.logger(value);\n          }\n\n          break;\n\n        default:\n          if (!IS_PRODUCTION) {\n            warn(false, \"No implementation found for action type '\".concat(action.type, \"'\"));\n          }\n\n          break;\n      }\n    };\n\n    var resolvedOptions = __assign(__assign({}, Interpreter.defaultOptions), options);\n\n    var clock = resolvedOptions.clock,\n        logger = resolvedOptions.logger,\n        parent = resolvedOptions.parent,\n        id = resolvedOptions.id;\n    var resolvedId = id !== undefined ? id : machine.id;\n    this.id = resolvedId;\n    this.logger = logger;\n    this.clock = clock;\n    this.parent = parent;\n    this.options = resolvedOptions;\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n    this.sessionId = registry.bookId();\n  }\n\n  Object.defineProperty(Interpreter.prototype, \"initialState\", {\n    get: function () {\n      var _this = this;\n\n      if (this._initialState) {\n        return this._initialState;\n      }\n\n      return provide(this, function () {\n        _this._initialState = _this.machine.initialState;\n        return _this._initialState;\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Interpreter.prototype, \"state\", {\n    /**\r\n     * @deprecated Use `.getSnapshot()` instead.\r\n     */\n    get: function () {\n      if (!IS_PRODUCTION) {\n        warn(this.status !== InterpreterStatus.NotStarted, \"Attempted to read state from uninitialized service '\".concat(this.id, \"'. Make sure the service is started first.\"));\n      }\n\n      return this._state;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Executes the actions of the given state, with that state's `context` and `event`.\r\n   *\r\n   * @param state The state whose actions will be executed\r\n   * @param actionsConfig The action implementations to use\r\n   */\n\n  Interpreter.prototype.execute = function (state, actionsConfig) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(state.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        this.exec(action, state, actionsConfig);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.update = function (state, _event) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n\n    var _this = this; // Attach session ID to state\n\n\n    state._sessionid = this.sessionId; // Update state\n\n    this._state = state; // Execute actions\n\n    if ((!this.machine.config.predictableActionArguments || // this is currently required to execute initial actions as the `initialState` gets cached\n    // we can't just recompute it (and execute actions while doing so) because we try to preserve identity of actors created within initial assigns\n    _event === initEvent) && this.options.execute) {\n      this.execute(this.state);\n    } else {\n      var item = void 0;\n\n      while (item = this._outgoingQueue.shift()) {\n        item[0].send(item[1]);\n      }\n    } // Update children\n\n\n    this.children.forEach(function (child) {\n      _this.state.children[child.id] = child;\n    }); // Dev tools\n\n    if (this.devTools) {\n      this.devTools.send(_event.data, state);\n    } // Execute listeners\n\n\n    if (state.event) {\n      try {\n        for (var _e = __values(this.eventListeners), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var listener = _f.value;\n          listener(state.event);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    try {\n      for (var _g = __values(this.listeners), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var listener = _h.value;\n        listener(state, state.event);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _j = __values(this.contextListeners), _k = _j.next(); !_k.done; _k = _j.next()) {\n        var contextListener = _k.value;\n        contextListener(this.state.context, this.state.history ? this.state.history.context : undefined);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    if (this.state.done) {\n      // get final child state node\n      var finalChildStateNode = state.configuration.find(function (sn) {\n        return sn.type === 'final' && sn.parent === _this.machine;\n      });\n      var doneData = finalChildStateNode && finalChildStateNode.doneData ? mapContext(finalChildStateNode.doneData, state.context, _event) : undefined;\n\n      try {\n        for (var _l = __values(this.doneListeners), _m = _l.next(); !_m.done; _m = _l.next()) {\n          var listener = _m.value;\n          listener(doneInvoke(this.id, doneData));\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n\n      this._stop();\n\n      this._stopChildren();\n    }\n  };\n  /*\r\n   * Adds a listener that is notified whenever a state transition happens. The listener is called with\r\n   * the next state and the event object that caused the state transition.\r\n   *\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onTransition = function (listener) {\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this.status === InterpreterStatus.Running) {\n      listener(this.state, this.state.event);\n    }\n\n    return this;\n  };\n\n  Interpreter.prototype.subscribe = function (nextListenerOrObserver, _, // TODO: error listener\n  completeListener) {\n    var _this = this;\n\n    var observer = toObserver(nextListenerOrObserver, _, completeListener);\n    this.listeners.add(observer.next); // Send current state to listener\n\n    if (this.status !== InterpreterStatus.NotStarted) {\n      observer.next(this.state);\n    }\n\n    var completeOnce = function () {\n      _this.doneListeners.delete(completeOnce);\n\n      _this.stopListeners.delete(completeOnce);\n\n      observer.complete();\n    };\n\n    if (this.status === InterpreterStatus.Stopped) {\n      observer.complete();\n    } else {\n      this.onDone(completeOnce);\n      this.onStop(completeOnce);\n    }\n\n    return {\n      unsubscribe: function () {\n        _this.listeners.delete(observer.next);\n\n        _this.doneListeners.delete(completeOnce);\n\n        _this.stopListeners.delete(completeOnce);\n      }\n    };\n  };\n  /**\r\n   * Adds an event listener that is notified whenever an event is sent to the running interpreter.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onEvent = function (listener) {\n    this.eventListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds an event listener that is notified whenever a `send` event occurs.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onSend = function (listener) {\n    this.sendListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a context listener that is notified whenever the state context changes.\r\n   * @param listener The context listener\r\n   */\n\n\n  Interpreter.prototype.onChange = function (listener) {\n    this.contextListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a listener that is notified when the machine is stopped.\r\n   * @param listener The listener\r\n   */\n\n\n  Interpreter.prototype.onStop = function (listener) {\n    this.stopListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a state listener that is notified when the statechart has reached its final state.\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onDone = function (listener) {\n    this.doneListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Removes a listener.\r\n   * @param listener The listener to remove\r\n   */\n\n\n  Interpreter.prototype.off = function (listener) {\n    this.listeners.delete(listener);\n    this.eventListeners.delete(listener);\n    this.sendListeners.delete(listener);\n    this.stopListeners.delete(listener);\n    this.doneListeners.delete(listener);\n    this.contextListeners.delete(listener);\n    return this;\n  };\n  /**\r\n   * Starts the interpreter from the given state, or the initial state.\r\n   * @param initialState The state to start the statechart from\r\n   */\n\n\n  Interpreter.prototype.start = function (initialState) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.Running) {\n      // Do not restart the service if it is already started\n      return this;\n    } // yes, it's a hack but we need the related cache to be populated for some things to work (like delayed transitions)\n    // this is usually called by `machine.getInitialState` but if we rehydrate from a state we might bypass this call\n    // we also don't want to call this method here as it resolves the full initial state which might involve calling assign actions\n    // and that could potentially lead to some unwanted side-effects (even such as creating some rogue actors)\n\n\n    this.machine._init();\n\n    registry.register(this.sessionId, this);\n    this.initialized = true;\n    this.status = InterpreterStatus.Running;\n    var resolvedState = initialState === undefined ? this.initialState : provide(this, function () {\n      return isStateConfig(initialState) ? _this.machine.resolveState(initialState) : _this.machine.resolveState(State.from(initialState, _this.machine.context));\n    });\n\n    if (this.options.devTools) {\n      this.attachDev();\n    }\n\n    this.scheduler.initialize(function () {\n      _this.update(resolvedState, initEvent);\n    });\n    return this;\n  };\n\n  Interpreter.prototype._stopChildren = function () {\n    // TODO: think about converting those to actions\n    this.children.forEach(function (child) {\n      if (isFunction(child.stop)) {\n        child.stop();\n      }\n    });\n    this.children.clear();\n  };\n\n  Interpreter.prototype._stop = function () {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;\n\n    try {\n      for (var _f = __values(this.listeners), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var listener = _g.value;\n        this.listeners.delete(listener);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    try {\n      for (var _h = __values(this.stopListeners), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var listener = _j.value; // call listener, then remove\n\n        listener();\n        this.stopListeners.delete(listener);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    try {\n      for (var _k = __values(this.contextListeners), _l = _k.next(); !_l.done; _l = _k.next()) {\n        var listener = _l.value;\n        this.contextListeners.delete(listener);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(this.doneListeners), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var listener = _o.value;\n        this.doneListeners.delete(listener);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    if (!this.initialized) {\n      // Interpreter already stopped; do nothing\n      return this;\n    }\n\n    this.initialized = false;\n    this.status = InterpreterStatus.Stopped;\n    this._initialState = undefined;\n\n    try {\n      // we are going to stop within the current sync frame\n      // so we can safely just cancel this here as nothing async should be fired anyway\n      for (var _p = __values(Object.keys(this.delayedEventsMap)), _q = _p.next(); !_q.done; _q = _p.next()) {\n        var key = _q.value;\n        this.clock.clearTimeout(this.delayedEventsMap[key]);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    } // clear everything that might be enqueued\n\n\n    this.scheduler.clear();\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n  };\n  /**\r\n   * Stops the interpreter and unsubscribe all listeners.\r\n   *\r\n   * This will also notify the `onStop` listeners.\r\n   */\n\n\n  Interpreter.prototype.stop = function () {\n    // TODO: add warning for stopping non-root interpreters\n    var _this = this; // grab the current scheduler as it will be replaced in _stop\n\n\n    var scheduler = this.scheduler;\n\n    this._stop(); // let what is currently processed to be finished\n\n\n    scheduler.schedule(function () {\n      // it feels weird to handle this here but we need to handle this even slightly \"out of band\"\n      var _event = toSCXMLEvent({\n        type: 'xstate.stop'\n      });\n\n      var nextState = provide(_this, function () {\n        var exitActions = flatten(__spreadArray([], __read(_this.state.configuration), false).sort(function (a, b) {\n          return b.order - a.order;\n        }).map(function (stateNode) {\n          return toActionObjects(stateNode.onExit, _this.machine.options.actions);\n        }));\n\n        var _a = __read(resolveActions(_this.machine, _this.state, _this.state.context, _event, [exitActions], _this.machine.config.predictableActionArguments ? _this._exec : undefined, _this.machine.config.predictableActionArguments || _this.machine.config.preserveActionOrder), 2),\n            resolvedActions = _a[0],\n            updatedContext = _a[1];\n\n        var newState = new State({\n          value: _this.state.value,\n          context: updatedContext,\n          _event: _event,\n          _sessionid: _this.sessionId,\n          historyValue: undefined,\n          history: _this.state,\n          actions: resolvedActions.filter(function (action) {\n            return action.type !== raise && (action.type !== send || !!action.to && action.to !== SpecialTargets.Internal);\n          }),\n          activities: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {},\n          done: _this.state.done,\n          tags: _this.state.tags,\n          machine: _this.machine\n        });\n        newState.changed = true;\n        return newState;\n      });\n\n      _this.update(nextState, _event);\n\n      _this._stopChildren();\n\n      registry.free(_this.sessionId);\n    });\n    return this;\n  };\n\n  Interpreter.prototype.batch = function (events) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.NotStarted && this.options.deferEvents) {\n      // tslint:disable-next-line:no-console\n      if (!IS_PRODUCTION) {\n        warn(false, \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\" and are deferred. Make sure .start() is called for this service.\\nEvent: \").concat(JSON.stringify(event)));\n      }\n    } else if (this.status !== InterpreterStatus.Running) {\n      throw new Error( // tslint:disable-next-line:max-line-length\n      \"\".concat(events.length, \" event(s) were sent to uninitialized service \\\"\").concat(this.machine.id, \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\"));\n    }\n\n    if (!events.length) {\n      return;\n    }\n\n    var exec = !!this.machine.config.predictableActionArguments && this._exec;\n    this.scheduler.schedule(function () {\n      var e_11, _a;\n\n      var nextState = _this.state;\n      var batchChanged = false;\n      var batchedActions = [];\n\n      var _loop_1 = function (event_1) {\n        var _event = toSCXMLEvent(event_1);\n\n        _this.forward(_event);\n\n        nextState = provide(_this, function () {\n          return _this.machine.transition(nextState, _event, undefined, exec || undefined);\n        });\n        batchedActions.push.apply(batchedActions, __spreadArray([], __read(_this.machine.config.predictableActionArguments ? nextState.actions : nextState.actions.map(function (a) {\n          return bindActionToState(a, nextState);\n        })), false));\n        batchChanged = batchChanged || !!nextState.changed;\n      };\n\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_1 = events_1_1.value;\n\n          _loop_1(event_1);\n        }\n      } catch (e_11_1) {\n        e_11 = {\n          error: e_11_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_11) throw e_11.error;\n        }\n      }\n\n      nextState.changed = batchChanged;\n      nextState.actions = batchedActions;\n\n      _this.update(nextState, toSCXMLEvent(events[events.length - 1]));\n    });\n  };\n  /**\r\n   * Returns a send function bound to this interpreter instance.\r\n   *\r\n   * @param event The event to be sent by the sender.\r\n   */\n\n\n  Interpreter.prototype.sender = function (event) {\n    return this.send.bind(this, event);\n  };\n\n  Interpreter.prototype._nextState = function (event, exec) {\n    var _this = this;\n\n    if (exec === void 0) {\n      exec = !!this.machine.config.predictableActionArguments && this._exec;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    if (_event.name.indexOf(errorPlatform) === 0 && !this.state.nextEvents.some(function (nextEvent) {\n      return nextEvent.indexOf(errorPlatform) === 0;\n    })) {\n      throw _event.data.data;\n    }\n\n    var nextState = provide(this, function () {\n      return _this.machine.transition(_this.state, _event, undefined, exec || undefined);\n    });\n    return nextState;\n  };\n  /**\r\n   * Returns the next state given the interpreter's current state and the event.\r\n   *\r\n   * This is a pure method that does _not_ update the interpreter's state.\r\n   *\r\n   * @param event The event to determine the next state\r\n   */\n\n\n  Interpreter.prototype.nextState = function (event) {\n    return this._nextState(event, false);\n  };\n\n  Interpreter.prototype.forward = function (event) {\n    var e_12, _a;\n\n    try {\n      for (var _b = __values(this.forwardTo), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var id = _c.value;\n        var child = this.children.get(id);\n\n        if (!child) {\n          throw new Error(\"Unable to forward event '\".concat(event, \"' from interpreter '\").concat(this.id, \"' to nonexistant child '\").concat(id, \"'.\"));\n        }\n\n        child.send(event);\n      }\n    } catch (e_12_1) {\n      e_12 = {\n        error: e_12_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_12) throw e_12.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.defer = function (sendAction) {\n    var _this = this;\n\n    this.delayedEventsMap[sendAction.id] = this.clock.setTimeout(function () {\n      if (sendAction.to) {\n        _this.sendTo(sendAction._event, sendAction.to, true);\n      } else {\n        _this.send(sendAction._event);\n      }\n    }, sendAction.delay);\n  };\n\n  Interpreter.prototype.cancel = function (sendId) {\n    this.clock.clearTimeout(this.delayedEventsMap[sendId]);\n    delete this.delayedEventsMap[sendId];\n  };\n\n  Interpreter.prototype.exec = function (action, state, actionFunctionMap) {\n    if (actionFunctionMap === void 0) {\n      actionFunctionMap = this.machine.options.actions;\n    }\n\n    this._exec(action, state.context, state._event, actionFunctionMap);\n  };\n\n  Interpreter.prototype.removeChild = function (childId) {\n    var _a;\n\n    this.children.delete(childId);\n    this.forwardTo.delete(childId); // this.state might not exist at the time this is called,\n    // such as when a child is added then removed while initializing the state\n\n    (_a = this.state) === null || _a === void 0 ? true : delete _a.children[childId];\n  };\n\n  Interpreter.prototype.stopChild = function (childId) {\n    var child = this.children.get(childId);\n\n    if (!child) {\n      return;\n    }\n\n    this.removeChild(childId);\n\n    if (isFunction(child.stop)) {\n      child.stop();\n    }\n  };\n\n  Interpreter.prototype.spawn = function (entity, name, options) {\n    if (this.status !== InterpreterStatus.Running) {\n      return createDeferredActor(entity, name);\n    }\n\n    if (isPromiseLike(entity)) {\n      return this.spawnPromise(Promise.resolve(entity), name);\n    } else if (isFunction(entity)) {\n      return this.spawnCallback(entity, name);\n    } else if (isSpawnedActor(entity)) {\n      return this.spawnActor(entity, name);\n    } else if (isObservable(entity)) {\n      return this.spawnObservable(entity, name);\n    } else if (isMachine(entity)) {\n      return this.spawnMachine(entity, __assign(__assign({}, options), {\n        id: name\n      }));\n    } else if (isBehavior(entity)) {\n      return this.spawnBehavior(entity, name);\n    } else {\n      throw new Error(\"Unable to spawn entity \\\"\".concat(name, \"\\\" of type \\\"\").concat(typeof entity, \"\\\".\"));\n    }\n  };\n\n  Interpreter.prototype.spawnMachine = function (machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var childService = new Interpreter(machine, __assign(__assign({}, this.options), {\n      parent: this,\n      id: options.id || machine.id\n    }));\n\n    var resolvedOptions = __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), options);\n\n    if (resolvedOptions.sync) {\n      childService.onTransition(function (state) {\n        _this.send(update, {\n          state: state,\n          id: childService.id\n        });\n      });\n    }\n\n    var actor = childService;\n    this.children.set(childService.id, actor);\n\n    if (resolvedOptions.autoForward) {\n      this.forwardTo.add(childService.id);\n    }\n\n    childService.onDone(function (doneEvent) {\n      _this.removeChild(childService.id);\n\n      _this.send(toSCXMLEvent(doneEvent, {\n        origin: childService.id\n      }));\n    }).start();\n    return actor;\n  };\n\n  Interpreter.prototype.spawnBehavior = function (behavior, id) {\n    var actorRef = spawnBehavior(behavior, {\n      id: id,\n      parent: this\n    });\n    this.children.set(id, actorRef);\n    return actorRef;\n  };\n\n  Interpreter.prototype.spawnPromise = function (promise, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var resolvedData;\n    promise.then(function (response) {\n      if (!canceled) {\n        resolvedData = response;\n\n        _this.removeChild(id);\n\n        _this.send(toSCXMLEvent(doneInvoke(id, response), {\n          origin: id\n        }));\n      }\n    }, function (errorData) {\n      if (!canceled) {\n        _this.removeChild(id);\n\n        var errorEvent = error(id, errorData);\n\n        try {\n          // Send \"error.platform.id\" to this (parent).\n          _this.send(toSCXMLEvent(errorEvent, {\n            origin: id\n          }));\n        } catch (error) {\n          reportUnhandledExceptionOnInvocation(errorData, error, id);\n\n          if (_this.devTools) {\n            _this.devTools.send(errorEvent, _this.state);\n          }\n\n          if (_this.machine.strict) {\n            // it would be better to always stop the state machine if unhandled\n            // exception/promise rejection happens but because we don't want to\n            // break existing code so enforce it on strict mode only especially so\n            // because documentation says that onError is optional\n            _this.stop();\n          }\n        }\n      }\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        var observer = toObserver(next, handleError, complete);\n        var unsubscribed = false;\n        promise.then(function (response) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.next(response);\n\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.complete();\n        }, function (err) {\n          if (unsubscribed) {\n            return;\n          }\n\n          observer.error(err);\n        });\n        return {\n          unsubscribe: function () {\n            return unsubscribed = true;\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return resolvedData;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnCallback = function (callback, id) {\n    var _a;\n\n    var _this = this;\n\n    var canceled = false;\n    var receivers = new Set();\n    var listeners = new Set();\n    var emitted;\n\n    var receive = function (e) {\n      emitted = e;\n      listeners.forEach(function (listener) {\n        return listener(e);\n      });\n\n      if (canceled) {\n        return;\n      }\n\n      _this.send(toSCXMLEvent(e, {\n        origin: id\n      }));\n    };\n\n    var callbackStop;\n\n    try {\n      callbackStop = callback(receive, function (newListener) {\n        receivers.add(newListener);\n      });\n    } catch (err) {\n      this.send(error(id, err));\n    }\n\n    if (isPromiseLike(callbackStop)) {\n      // it turned out to be an async function, can't reliably check this before calling `callback`\n      // because transpiled async functions are not recognizable\n      return this.spawnPromise(callbackStop, id);\n    }\n\n    var actor = (_a = {\n      id: id,\n      send: function (event) {\n        return receivers.forEach(function (receiver) {\n          return receiver(event);\n        });\n      },\n      subscribe: function (next) {\n        var observer = toObserver(next);\n        listeners.add(observer.next);\n        return {\n          unsubscribe: function () {\n            listeners.delete(observer.next);\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n\n        if (isFunction(callbackStop)) {\n          callbackStop();\n        }\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      },\n      getSnapshot: function () {\n        return emitted;\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnObservable = function (source, id) {\n    var _a;\n\n    var _this = this;\n\n    var emitted;\n    var subscription = source.subscribe(function (value) {\n      emitted = value;\n\n      _this.send(toSCXMLEvent(value, {\n        origin: id\n      }));\n    }, function (err) {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(error(id, err), {\n        origin: id\n      }));\n    }, function () {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(doneInvoke(id), {\n        origin: id\n      }));\n    });\n    var actor = (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        return source.subscribe(next, handleError, complete);\n      },\n      stop: function () {\n        return subscription.unsubscribe();\n      },\n      getSnapshot: function () {\n        return emitted;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a);\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActor = function (actor, name) {\n    this.children.set(name, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActivity = function (activity) {\n    var implementation = this.machine.options && this.machine.options.activities ? this.machine.options.activities[activity.type] : undefined;\n\n    if (!implementation) {\n      if (!IS_PRODUCTION) {\n        warn(false, \"No implementation found for activity '\".concat(activity.type, \"'\"));\n      } // tslint:disable-next-line:no-console\n\n\n      return;\n    } // Start implementation\n\n\n    var dispose = implementation(this.state.context, activity);\n    this.spawnEffect(activity.id, dispose);\n  };\n\n  Interpreter.prototype.spawnEffect = function (id, dispose) {\n    var _a;\n\n    this.children.set(id, (_a = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function () {\n        return {\n          unsubscribe: function () {\n            return void 0;\n          }\n        };\n      },\n      stop: dispose || undefined,\n      getSnapshot: function () {\n        return undefined;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    }, _a[symbolObservable] = function () {\n      return this;\n    }, _a));\n  };\n\n  Interpreter.prototype.attachDev = function () {\n    var global = getGlobal();\n\n    if (this.options.devTools && global) {\n      if (global.__REDUX_DEVTOOLS_EXTENSION__) {\n        var devToolsOptions = typeof this.options.devTools === 'object' ? this.options.devTools : undefined;\n        this.devTools = global.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({\n          name: this.id,\n          autoPause: true,\n          stateSanitizer: function (state) {\n            return {\n              value: state.value,\n              context: state.context,\n              actions: state.actions\n            };\n          }\n        }, devToolsOptions), {\n          features: __assign({\n            jump: false,\n            skip: false\n          }, devToolsOptions ? devToolsOptions.features : undefined)\n        }), this.machine);\n        this.devTools.init(this.state);\n      } // add XState-specific dev tooling hook\n\n\n      registerService(this);\n    }\n  };\n\n  Interpreter.prototype.toJSON = function () {\n    return {\n      id: this.id\n    };\n  };\n\n  Interpreter.prototype[symbolObservable] = function () {\n    return this;\n  };\n\n  Interpreter.prototype.getSnapshot = function () {\n    if (this.status === InterpreterStatus.NotStarted) {\n      return this.initialState;\n    }\n\n    return this._state;\n  };\n  /**\r\n   * The default interpreter options:\r\n   *\r\n   * - `clock` uses the global `setTimeout` and `clearTimeout` functions\r\n   * - `logger` uses the global `console.log()` method\r\n   */\n\n\n  Interpreter.defaultOptions = {\n    execute: true,\n    deferEvents: true,\n    clock: {\n      setTimeout: function (fn, ms) {\n        return setTimeout(fn, ms);\n      },\n      clearTimeout: function (id) {\n        return clearTimeout(id);\n      }\n    },\n    logger: /*#__PURE__*/console.log.bind(console),\n    devTools: false\n  };\n  Interpreter.interpret = interpret;\n  return Interpreter;\n}();\n\nvar resolveSpawnOptions = function (nameOrOptions) {\n  if (isString(nameOrOptions)) {\n    return __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n      name: nameOrOptions\n    });\n  }\n\n  return __assign(__assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n    name: uniqueId()\n  }), nameOrOptions);\n};\n\nfunction spawn(entity, nameOrOptions) {\n  var resolvedOptions = resolveSpawnOptions(nameOrOptions);\n  return consume(function (service) {\n    if (!IS_PRODUCTION) {\n      var isLazyEntity = isMachine(entity) || isFunction(entity);\n      warn(!!service || isLazyEntity, \"Attempted to spawn an Actor (ID: \\\"\".concat(isMachine(entity) ? entity.id : 'undefined', \"\\\") outside of a service. This will have no effect.\"));\n    }\n\n    if (service) {\n      return service.spawn(entity, resolvedOptions.name, resolvedOptions);\n    } else {\n      return createDeferredActor(entity, resolvedOptions.name);\n    }\n  });\n}\n/**\r\n * Creates a new Interpreter instance for the given machine with the provided options, if any.\r\n *\r\n * @param machine The machine to interpret\r\n * @param options Interpreter options\r\n */\n\nfunction interpret(machine, options) {\n  var interpreter = new Interpreter(machine, options);\n  return interpreter;\n}\n\nexport { Interpreter, InterpreterStatus, interpret, spawn };\n","import { __assign, __rest } from './_virtual/_tslib.js';\nimport './types.js';\nimport { invoke } from './actionTypes.js';\nimport './utils.js';\nimport './environment.js';\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    var simpleSrc = {\n      type: src\n    };\n\n    simpleSrc.toString = function () {\n      return src;\n    }; // v4 compat - TODO: remove in v5\n\n\n    return simpleSrc;\n  }\n\n  return src;\n}\nfunction toInvokeDefinition(invokeConfig) {\n  return __assign(__assign({\n    type: invoke\n  }, invokeConfig), {\n    toJSON: function () {\n      invokeConfig.onDone;\n          invokeConfig.onError;\n          var invokeDef = __rest(invokeConfig, [\"onDone\", \"onError\"]);\n\n      return __assign(__assign({}, invokeDef), {\n        type: invoke,\n        src: toInvokeSource(invokeConfig.src)\n      });\n    }\n  });\n}\n\nexport { toInvokeDefinition, toInvokeSource };\n","import { __assign, __spreadArray, __read, __values, __rest } from './_virtual/_tslib.js';\nimport { isFunction, mapValues, isArray, flatten, toArray, toStateValue, isString, getEventType, toSCXMLEvent, matchesState, path, evaluateGuard, mapContext, pathToStateValue, isBuiltInEvent, partition, updateHistoryValue, toStatePath, mapFilterValues, warn, toStatePaths, nestedPath, normalizeTarget, toGuard, toTransitionConfigArray, isMachine, createInvokeId } from './utils.js';\nimport { SpecialTargets } from './types.js';\nimport { State, stateValuesEqual } from './State.js';\nimport { raise as raise$1, send, start as start$1, stop as stop$1, invoke, update, nullEvent } from './actionTypes.js';\nimport { done, start, toActionObjects, raise, stop, resolveActions, doneInvoke, error, toActionObject, toActivityDefinition, after, send as send$1, cancel, initEvent } from './actions.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { STATE_DELIMITER } from './constants.js';\nimport { getAllStateNodes, getConfiguration, isInFinalState, getTagsFromConfiguration, has, getChildren, getValue, isLeafNode, getAllChildren } from './stateUtils.js';\nimport { createInvocableActor } from './Actor.js';\nimport { toInvokeDefinition } from './invokeUtils.js';\n\nvar NULL_EVENT = '';\nvar STATE_IDENTIFIER = '#';\nvar WILDCARD = '*';\nvar EMPTY_OBJECT = {};\n\nvar isStateId = function (str) {\n  return str[0] === STATE_IDENTIFIER;\n};\n\nvar createDefaultOptions = function () {\n  return {\n    actions: {},\n    guards: {},\n    services: {},\n    activities: {},\n    delays: {}\n  };\n};\n\nvar validateArrayifiedTransitions = function (stateNode, event, transitions) {\n  var hasNonLastUnguardedTarget = transitions.slice(0, -1).some(function (transition) {\n    return !('cond' in transition) && !('in' in transition) && (isString(transition.target) || isMachine(transition.target));\n  });\n  var eventText = event === NULL_EVENT ? 'the transient event' : \"event '\".concat(event, \"'\");\n  warn(!hasNonLastUnguardedTarget, \"One or more transitions for \".concat(eventText, \" on state '\").concat(stateNode.id, \"' are unreachable. \") + \"Make sure that the default transition is the last one defined.\");\n};\n\nvar StateNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function StateNode(\n  /**\r\n   * The raw config used to create the machine.\r\n   */\n  config, options,\n  /**\r\n   * The initial extended state\r\n   */\n  _context, // TODO: this is unsafe, but we're removing it in v5 anyway\n  _stateInfo) {\n    if (_context === void 0) {\n      _context = 'context' in config ? config.context : undefined;\n    }\n\n    var _this = this;\n\n    var _a;\n\n    this.config = config;\n    this._context = _context;\n    /**\r\n     * The order this state node appears. Corresponds to the implicit SCXML document order.\r\n     */\n\n    this.order = -1;\n    this.__xstatenode = true;\n    this.__cache = {\n      events: undefined,\n      relativeValue: new Map(),\n      initialStateValue: undefined,\n      initialState: undefined,\n      on: undefined,\n      transitions: undefined,\n      candidates: {},\n      delayedTransitions: undefined\n    };\n    this.idMap = {};\n    this.tags = [];\n    this.options = Object.assign(createDefaultOptions(), options);\n    this.parent = _stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.parent;\n    this.key = this.config.key || (_stateInfo === null || _stateInfo === void 0 ? void 0 : _stateInfo.key) || this.config.id || '(machine)';\n    this.machine = this.parent ? this.parent.machine : this;\n    this.path = this.parent ? this.parent.path.concat(this.key) : [];\n    this.delimiter = this.config.delimiter || (this.parent ? this.parent.delimiter : STATE_DELIMITER);\n    this.id = this.config.id || __spreadArray([this.machine.key], __read(this.path), false).join(this.delimiter);\n    this.version = this.parent ? this.parent.version : this.config.version;\n    this.type = this.config.type || (this.config.parallel ? 'parallel' : this.config.states && Object.keys(this.config.states).length ? 'compound' : this.config.history ? 'history' : 'atomic');\n    this.schema = this.parent ? this.machine.schema : (_a = this.config.schema) !== null && _a !== void 0 ? _a : {};\n    this.description = this.config.description;\n\n    if (!IS_PRODUCTION) {\n      warn(!('parallel' in this.config), \"The \\\"parallel\\\" property is deprecated and will be removed in version 4.1. \".concat(this.config.parallel ? \"Replace with `type: 'parallel'`\" : \"Use `type: '\".concat(this.type, \"'`\"), \" in the config for state node '\").concat(this.id, \"' instead.\"));\n    }\n\n    this.initial = this.config.initial;\n    this.states = this.config.states ? mapValues(this.config.states, function (stateConfig, key) {\n      var _a;\n\n      var stateNode = new StateNode(stateConfig, {}, undefined, {\n        parent: _this,\n        key: key\n      });\n      Object.assign(_this.idMap, __assign((_a = {}, _a[stateNode.id] = stateNode, _a), stateNode.idMap));\n      return stateNode;\n    }) : EMPTY_OBJECT; // Document order\n\n    var order = 0;\n\n    function dfs(stateNode) {\n      var e_1, _a;\n\n      stateNode.order = order++;\n\n      try {\n        for (var _b = __values(getAllChildren(stateNode)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          dfs(child);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    dfs(this); // History config\n\n    this.history = this.config.history === true ? 'shallow' : this.config.history || false;\n    this._transient = !!this.config.always || (!this.config.on ? false : Array.isArray(this.config.on) ? this.config.on.some(function (_a) {\n      var event = _a.event;\n      return event === NULL_EVENT;\n    }) : NULL_EVENT in this.config.on);\n    this.strict = !!this.config.strict; // TODO: deprecate (entry)\n\n    this.onEntry = toArray(this.config.entry || this.config.onEntry).map(function (action) {\n      return toActionObject(action);\n    }); // TODO: deprecate (exit)\n\n    this.onExit = toArray(this.config.exit || this.config.onExit).map(function (action) {\n      return toActionObject(action);\n    });\n    this.meta = this.config.meta;\n    this.doneData = this.type === 'final' ? this.config.data : undefined;\n    this.invoke = toArray(this.config.invoke).map(function (invokeConfig, i) {\n      var _a, _b;\n\n      if (isMachine(invokeConfig)) {\n        var invokeId = createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_a = {}, _a[invokeId] = invokeConfig, _a), _this.machine.options.services);\n        return toInvokeDefinition({\n          src: invokeId,\n          id: invokeId\n        });\n      } else if (isString(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        return toInvokeDefinition(__assign(__assign({}, invokeConfig), {\n          id: invokeId,\n          src: invokeConfig.src\n        }));\n      } else if (isMachine(invokeConfig.src) || isFunction(invokeConfig.src)) {\n        var invokeId = invokeConfig.id || createInvokeId(_this.id, i);\n        _this.machine.options.services = __assign((_b = {}, _b[invokeId] = invokeConfig.src, _b), _this.machine.options.services);\n        return toInvokeDefinition(__assign(__assign({\n          id: invokeId\n        }, invokeConfig), {\n          src: invokeId\n        }));\n      } else {\n        var invokeSource = invokeConfig.src;\n        return toInvokeDefinition(__assign(__assign({\n          id: createInvokeId(_this.id, i)\n        }, invokeConfig), {\n          src: invokeSource\n        }));\n      }\n    });\n    this.activities = toArray(this.config.activities).concat(this.invoke).map(function (activity) {\n      return toActivityDefinition(activity);\n    });\n    this.transition = this.transition.bind(this);\n    this.tags = toArray(this.config.tags); // TODO: this is the real fix for initialization once\n    // state node getters are deprecated\n    // if (!this.parent) {\n    //   this._init();\n    // }\n  }\n\n  StateNode.prototype._init = function () {\n    if (this.__cache.transitions) {\n      return;\n    }\n\n    getAllStateNodes(this).forEach(function (stateNode) {\n      return stateNode.on;\n    });\n  };\n  /**\r\n   * Clones this state machine with custom options and context.\r\n   *\r\n   * @param options Options (actions, guards, activities, services) to recursively merge with the existing options.\r\n   * @param context Custom context (will override predefined context)\r\n   */\n\n\n  StateNode.prototype.withConfig = function (options, context) {\n    var _a = this.options,\n        actions = _a.actions,\n        activities = _a.activities,\n        guards = _a.guards,\n        services = _a.services,\n        delays = _a.delays;\n    return new StateNode(this.config, {\n      actions: __assign(__assign({}, actions), options.actions),\n      activities: __assign(__assign({}, activities), options.activities),\n      guards: __assign(__assign({}, guards), options.guards),\n      services: __assign(__assign({}, services), options.services),\n      delays: __assign(__assign({}, delays), options.delays)\n    }, context !== null && context !== void 0 ? context : this.context);\n  };\n  /**\r\n   * Clones this state machine with custom context.\r\n   *\r\n   * @param context Custom context (will override predefined context, not recursive)\r\n   */\n\n\n  StateNode.prototype.withContext = function (context) {\n    return new StateNode(this.config, this.options, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"context\", {\n    get: function () {\n      return isFunction(this._context) ? this._context() : this._context;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"definition\", {\n    /**\r\n     * The well-structured state node definition.\r\n     */\n    get: function () {\n      return {\n        id: this.id,\n        key: this.key,\n        version: this.version,\n        context: this.context,\n        type: this.type,\n        initial: this.initial,\n        history: this.history,\n        states: mapValues(this.states, function (state) {\n          return state.definition;\n        }),\n        on: this.on,\n        transitions: this.transitions,\n        entry: this.onEntry,\n        exit: this.onExit,\n        activities: this.activities || [],\n        meta: this.meta,\n        order: this.order || -1,\n        data: this.doneData,\n        invoke: this.invoke,\n        description: this.description,\n        tags: this.tags\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.toJSON = function () {\n    return this.definition;\n  };\n\n  Object.defineProperty(StateNode.prototype, \"on\", {\n    /**\r\n     * The mapping of events to transitions.\r\n     */\n    get: function () {\n      if (this.__cache.on) {\n        return this.__cache.on;\n      }\n\n      var transitions = this.transitions;\n      return this.__cache.on = transitions.reduce(function (map, transition) {\n        map[transition.eventType] = map[transition.eventType] || [];\n        map[transition.eventType].push(transition);\n        return map;\n      }, {});\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"after\", {\n    get: function () {\n      return this.__cache.delayedTransitions || (this.__cache.delayedTransitions = this.getDelayedTransitions(), this.__cache.delayedTransitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"transitions\", {\n    /**\r\n     * All the transitions that can be taken from this state node.\r\n     */\n    get: function () {\n      return this.__cache.transitions || (this.__cache.transitions = this.formatTransitions(), this.__cache.transitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getCandidates = function (eventName) {\n    if (this.__cache.candidates[eventName]) {\n      return this.__cache.candidates[eventName];\n    }\n\n    var transient = eventName === NULL_EVENT;\n    var candidates = this.transitions.filter(function (transition) {\n      var sameEventType = transition.eventType === eventName; // null events should only match against eventless transitions\n\n      return transient ? sameEventType : sameEventType || transition.eventType === WILDCARD;\n    });\n    this.__cache.candidates[eventName] = candidates;\n    return candidates;\n  };\n  /**\r\n   * All delayed transitions from the config.\r\n   */\n\n\n  StateNode.prototype.getDelayedTransitions = function () {\n    var _this = this;\n\n    var afterConfig = this.config.after;\n\n    if (!afterConfig) {\n      return [];\n    }\n\n    var mutateEntryExit = function (delay, i) {\n      var delayRef = isFunction(delay) ? \"\".concat(_this.id, \":delay[\").concat(i, \"]\") : delay;\n      var eventType = after(delayRef, _this.id);\n\n      _this.onEntry.push(send$1(eventType, {\n        delay: delay\n      }));\n\n      _this.onExit.push(cancel(eventType));\n\n      return eventType;\n    };\n\n    var delayedTransitions = isArray(afterConfig) ? afterConfig.map(function (transition, i) {\n      var eventType = mutateEntryExit(transition.delay, i);\n      return __assign(__assign({}, transition), {\n        event: eventType\n      });\n    }) : flatten(Object.keys(afterConfig).map(function (delay, i) {\n      var configTransition = afterConfig[delay];\n      var resolvedTransition = isString(configTransition) ? {\n        target: configTransition\n      } : configTransition;\n      var resolvedDelay = !isNaN(+delay) ? +delay : delay;\n      var eventType = mutateEntryExit(resolvedDelay, i);\n      return toArray(resolvedTransition).map(function (transition) {\n        return __assign(__assign({}, transition), {\n          event: eventType,\n          delay: resolvedDelay\n        });\n      });\n    }));\n    return delayedTransitions.map(function (delayedTransition) {\n      var delay = delayedTransition.delay;\n      return __assign(__assign({}, _this.formatTransition(delayedTransition)), {\n        delay: delay\n      });\n    });\n  };\n  /**\r\n   * Returns the state nodes represented by the current state value.\r\n   *\r\n   * @param state The state value or State instance\r\n   */\n\n\n  StateNode.prototype.getStateNodes = function (state) {\n    var _a;\n\n    var _this = this;\n\n    if (!state) {\n      return [];\n    }\n\n    var stateValue = state instanceof State ? state.value : toStateValue(state, this.delimiter);\n\n    if (isString(stateValue)) {\n      var initialStateValue = this.getStateNode(stateValue).initial;\n      return initialStateValue !== undefined ? this.getStateNodes((_a = {}, _a[stateValue] = initialStateValue, _a)) : [this, this.states[stateValue]];\n    }\n\n    var subStateKeys = Object.keys(stateValue);\n    var subStateNodes = [this];\n    subStateNodes.push.apply(subStateNodes, __spreadArray([], __read(flatten(subStateKeys.map(function (subStateKey) {\n      return _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey]);\n    }))), false));\n    return subStateNodes;\n  };\n  /**\r\n   * Returns `true` if this state node explicitly handles the given event.\r\n   *\r\n   * @param event The event in question\r\n   */\n\n\n  StateNode.prototype.handles = function (event) {\n    var eventType = getEventType(event);\n    return this.events.includes(eventType);\n  };\n  /**\r\n   * Resolves the given `state` to a new `State` instance relative to this machine.\r\n   *\r\n   * This ensures that `.events` and `.nextEvents` represent the correct values.\r\n   *\r\n   * @param state The state to resolve\r\n   */\n\n\n  StateNode.prototype.resolveState = function (state) {\n    var stateFromConfig = state instanceof State ? state : State.create(state);\n    var configuration = Array.from(getConfiguration([], this.getStateNodes(stateFromConfig.value)));\n    return new State(__assign(__assign({}, stateFromConfig), {\n      value: this.resolve(stateFromConfig.value),\n      configuration: configuration,\n      done: isInFinalState(configuration, this),\n      tags: getTagsFromConfiguration(configuration),\n      machine: this.machine\n    }));\n  };\n\n  StateNode.prototype.transitionLeafNode = function (stateValue, state, _event) {\n    var stateNode = this.getStateNode(stateValue);\n    var next = stateNode.next(state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionCompoundNode = function (stateValue, state, _event) {\n    var subStateKeys = Object.keys(stateValue);\n    var stateNode = this.getStateNode(subStateKeys[0]);\n\n    var next = stateNode._transition(stateValue[subStateKeys[0]], state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionParallelNode = function (stateValue, state, _event) {\n    var e_2, _a;\n\n    var transitionMap = {};\n\n    try {\n      for (var _b = __values(Object.keys(stateValue)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var subStateKey = _c.value;\n        var subStateValue = stateValue[subStateKey];\n\n        if (!subStateValue) {\n          continue;\n        }\n\n        var subStateNode = this.getStateNode(subStateKey);\n\n        var next = subStateNode._transition(subStateValue, state, _event);\n\n        if (next) {\n          transitionMap[subStateKey] = next;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var stateTransitions = Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key];\n    });\n    var enabledTransitions = flatten(stateTransitions.map(function (st) {\n      return st.transitions;\n    }));\n    var willTransition = stateTransitions.some(function (st) {\n      return st.transitions.length > 0;\n    });\n\n    if (!willTransition) {\n      return this.next(state, _event);\n    }\n\n    var entryNodes = flatten(stateTransitions.map(function (t) {\n      return t.entrySet;\n    }));\n    var configuration = flatten(Object.keys(transitionMap).map(function (key) {\n      return transitionMap[key].configuration;\n    }));\n    return {\n      transitions: enabledTransitions,\n      entrySet: entryNodes,\n      exitSet: flatten(stateTransitions.map(function (t) {\n        return t.exitSet;\n      })),\n      configuration: configuration,\n      source: state,\n      actions: flatten(Object.keys(transitionMap).map(function (key) {\n        return transitionMap[key].actions;\n      }))\n    };\n  };\n\n  StateNode.prototype._transition = function (stateValue, state, _event) {\n    // leaf node\n    if (isString(stateValue)) {\n      return this.transitionLeafNode(stateValue, state, _event);\n    } // hierarchical node\n\n\n    if (Object.keys(stateValue).length === 1) {\n      return this.transitionCompoundNode(stateValue, state, _event);\n    } // orthogonal node\n\n\n    return this.transitionParallelNode(stateValue, state, _event);\n  };\n\n  StateNode.prototype.getTransitionData = function (state, event) {\n    return this._transition(state.value, state, toSCXMLEvent(event));\n  };\n\n  StateNode.prototype.next = function (state, _event) {\n    var e_3, _a;\n\n    var _this = this;\n\n    var eventName = _event.name;\n    var actions = [];\n    var nextStateNodes = [];\n    var selectedTransition;\n\n    try {\n      for (var _b = __values(this.getCandidates(eventName)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var candidate = _c.value;\n        var cond = candidate.cond,\n            stateIn = candidate.in;\n        var resolvedContext = state.context;\n        var isInState = stateIn ? isString(stateIn) && isStateId(stateIn) ? // Check if in state by ID\n        state.matches(toStateValue(this.getStateNodeById(stateIn).path, this.delimiter)) : // Check if in state by relative grandparent\n        matchesState(toStateValue(stateIn, this.delimiter), path(this.path.slice(0, -2))(state.value)) : true;\n        var guardPassed = false;\n\n        try {\n          guardPassed = !cond || evaluateGuard(this.machine, cond, resolvedContext, _event, state);\n        } catch (err) {\n          throw new Error(\"Unable to evaluate guard '\".concat(cond.name || cond.type, \"' in transition for event '\").concat(eventName, \"' in state node '\").concat(this.id, \"':\\n\").concat(err.message));\n        }\n\n        if (guardPassed && isInState) {\n          if (candidate.target !== undefined) {\n            nextStateNodes = candidate.target;\n          }\n\n          actions.push.apply(actions, __spreadArray([], __read(candidate.actions), false));\n          selectedTransition = candidate;\n          break;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!selectedTransition) {\n      return undefined;\n    }\n\n    if (!nextStateNodes.length) {\n      return {\n        transitions: [selectedTransition],\n        entrySet: [],\n        exitSet: [],\n        configuration: state.value ? [this] : [],\n        source: state,\n        actions: actions\n      };\n    }\n\n    var allNextStateNodes = flatten(nextStateNodes.map(function (stateNode) {\n      return _this.getRelativeStateNodes(stateNode, state.historyValue);\n    }));\n    var isInternal = !!selectedTransition.internal;\n    var reentryNodes = [];\n\n    if (!isInternal) {\n      nextStateNodes.forEach(function (targetNode) {\n        reentryNodes.push.apply(reentryNodes, __spreadArray([], __read(_this.getExternalReentryNodes(targetNode)), false));\n      });\n    }\n\n    return {\n      transitions: [selectedTransition],\n      entrySet: reentryNodes,\n      exitSet: isInternal ? [] : [this],\n      configuration: allNextStateNodes,\n      source: state,\n      actions: actions\n    };\n  };\n\n  StateNode.prototype.getExternalReentryNodes = function (targetNode) {\n    var nodes = [];\n\n    var _a = __read(targetNode.order > this.order ? [targetNode, this] : [this, targetNode], 2),\n        marker = _a[0],\n        possibleAncestor = _a[1];\n\n    while (marker && marker !== possibleAncestor) {\n      nodes.push(marker);\n      marker = marker.parent;\n    }\n\n    if (marker !== possibleAncestor) {\n      // we never got to `possibleAncestor`, therefore the initial `marker` \"escapes\" it\n      // it's in a different part of the tree so no states will be reentered for such an external transition\n      return [];\n    }\n\n    nodes.push(possibleAncestor);\n    return nodes;\n  };\n\n  StateNode.prototype.getActions = function (resolvedConfig, isDone, transition, currentContext, _event, prevState, predictableExec) {\n    var e_4, _a, e_5, _b;\n\n    var _this = this;\n\n    var prevConfig = getConfiguration([], prevState ? this.getStateNodes(prevState.value) : [this]);\n\n    try {\n      for (var resolvedConfig_1 = __values(resolvedConfig), resolvedConfig_1_1 = resolvedConfig_1.next(); !resolvedConfig_1_1.done; resolvedConfig_1_1 = resolvedConfig_1.next()) {\n        var sn = resolvedConfig_1_1.value;\n\n        if (!has(prevConfig, sn) || has(transition.entrySet, sn.parent)) {\n          transition.entrySet.push(sn);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (resolvedConfig_1_1 && !resolvedConfig_1_1.done && (_a = resolvedConfig_1.return)) _a.call(resolvedConfig_1);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    try {\n      for (var prevConfig_1 = __values(prevConfig), prevConfig_1_1 = prevConfig_1.next(); !prevConfig_1_1.done; prevConfig_1_1 = prevConfig_1.next()) {\n        var sn = prevConfig_1_1.value;\n\n        if (!has(resolvedConfig, sn) || has(transition.exitSet, sn.parent)) {\n          transition.exitSet.push(sn);\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (prevConfig_1_1 && !prevConfig_1_1.done && (_b = prevConfig_1.return)) _b.call(prevConfig_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    var doneEvents = flatten(transition.entrySet.map(function (sn) {\n      var events = [];\n\n      if (sn.type !== 'final') {\n        return events;\n      }\n\n      var parent = sn.parent;\n\n      if (!parent.parent) {\n        return events;\n      }\n\n      events.push(done(sn.id, sn.doneData), // TODO: deprecate - final states should not emit done events for their own state.\n      done(parent.id, sn.doneData ? mapContext(sn.doneData, currentContext, _event) : undefined));\n      var grandparent = parent.parent;\n\n      if (grandparent.type === 'parallel') {\n        if (getChildren(grandparent).every(function (parentNode) {\n          return isInFinalState(transition.configuration, parentNode);\n        })) {\n          events.push(done(grandparent.id));\n        }\n      }\n\n      return events;\n    }));\n    transition.exitSet.sort(function (a, b) {\n      return b.order - a.order;\n    });\n    transition.entrySet.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    var entryStates = new Set(transition.entrySet);\n    var exitStates = new Set(transition.exitSet);\n    var entryActions = Array.from(entryStates).map(function (stateNode) {\n      var entryActions = stateNode.onEntry;\n      var invokeActions = stateNode.activities.map(function (activity) {\n        return start(activity);\n      });\n      return toActionObjects(predictableExec ? __spreadArray(__spreadArray([], __read(entryActions), false), __read(invokeActions), false) : __spreadArray(__spreadArray([], __read(invokeActions), false), __read(entryActions), false), _this.machine.options.actions);\n    }).concat([doneEvents.map(raise)]);\n    var exitActions = Array.from(exitStates).map(function (stateNode) {\n      return toActionObjects(__spreadArray(__spreadArray([], __read(stateNode.onExit), false), __read(stateNode.activities.map(function (activity) {\n        return stop(activity);\n      })), false), _this.machine.options.actions);\n    });\n    var actions = exitActions.concat([toActionObjects(transition.actions, this.machine.options.actions)]).concat(entryActions);\n\n    if (isDone) {\n      var stopActions = toActionObjects(flatten(__spreadArray([], __read(resolvedConfig), false).sort(function (a, b) {\n        return b.order - a.order;\n      }).map(function (stateNode) {\n        return stateNode.onExit;\n      })), this.machine.options.actions).filter(function (action) {\n        return action.type !== raise$1 && (action.type !== send || !!action.to && action.to !== SpecialTargets.Internal);\n      });\n      return actions.concat([stopActions]);\n    }\n\n    return actions;\n  };\n  /**\r\n   * Determines the next state given the current `state` and sent `event`.\r\n   *\r\n   * @param state The current State instance or state value\r\n   * @param event The event that was sent at the current state\r\n   * @param context The current context (extended state) of the current state\r\n   */\n\n\n  StateNode.prototype.transition = function (state, event, context, exec) {\n    if (state === void 0) {\n      state = this.initialState;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    var currentState;\n\n    if (state instanceof State) {\n      currentState = context === undefined ? state : this.resolveState(State.from(state, context));\n    } else {\n      var resolvedStateValue = isString(state) ? this.resolve(pathToStateValue(this.getResolvedPath(state))) : this.resolve(state);\n      var resolvedContext = context !== null && context !== void 0 ? context : this.machine.context;\n      currentState = this.resolveState(State.from(resolvedStateValue, resolvedContext));\n    }\n\n    if (!IS_PRODUCTION && _event.name === WILDCARD) {\n      throw new Error(\"An event cannot have the wildcard type ('\".concat(WILDCARD, \"')\"));\n    }\n\n    if (this.strict) {\n      if (!this.events.includes(_event.name) && !isBuiltInEvent(_event.name)) {\n        throw new Error(\"Machine '\".concat(this.id, \"' does not accept event '\").concat(_event.name, \"'\"));\n      }\n    }\n\n    var stateTransition = this._transition(currentState.value, currentState, _event) || {\n      transitions: [],\n      configuration: [],\n      entrySet: [],\n      exitSet: [],\n      source: currentState,\n      actions: []\n    };\n    var prevConfig = getConfiguration([], this.getStateNodes(currentState.value));\n    var resolvedConfig = stateTransition.configuration.length ? getConfiguration(prevConfig, stateTransition.configuration) : prevConfig;\n    stateTransition.configuration = __spreadArray([], __read(resolvedConfig), false);\n    return this.resolveTransition(stateTransition, currentState, currentState.context, exec, _event);\n  };\n\n  StateNode.prototype.resolveRaisedTransition = function (state, _event, originalEvent, predictableExec) {\n    var _a;\n\n    var currentActions = state.actions;\n    state = this.transition(state, _event, undefined, predictableExec); // Save original event to state\n    // TODO: this should be the raised event! Delete in V5 (breaking)\n\n    state._event = originalEvent;\n    state.event = originalEvent.data;\n\n    (_a = state.actions).unshift.apply(_a, __spreadArray([], __read(currentActions), false));\n\n    return state;\n  };\n\n  StateNode.prototype.resolveTransition = function (stateTransition, currentState, context, predictableExec, _event) {\n    var e_6, _a, e_7, _b;\n\n    var _this = this;\n\n    if (_event === void 0) {\n      _event = initEvent;\n    }\n\n    var configuration = stateTransition.configuration; // Transition will \"apply\" if:\n    // - this is the initial state (there is no current state)\n    // - OR there are transitions\n\n    var willTransition = !currentState || stateTransition.transitions.length > 0;\n    var resolvedConfiguration = willTransition ? stateTransition.configuration : currentState ? currentState.configuration : [];\n    var isDone = isInFinalState(resolvedConfiguration, this);\n    var resolvedStateValue = willTransition ? getValue(this.machine, configuration) : undefined;\n    var historyValue = currentState ? currentState.historyValue ? currentState.historyValue : stateTransition.source ? this.machine.historyValue(currentState.value) : undefined : undefined;\n    var actionBlocks = this.getActions(new Set(resolvedConfiguration), isDone, stateTransition, context, _event, currentState, predictableExec);\n    var activities = currentState ? __assign({}, currentState.activities) : {};\n\n    try {\n      for (var actionBlocks_1 = __values(actionBlocks), actionBlocks_1_1 = actionBlocks_1.next(); !actionBlocks_1_1.done; actionBlocks_1_1 = actionBlocks_1.next()) {\n        var block = actionBlocks_1_1.value;\n\n        try {\n          for (var block_1 = (e_7 = void 0, __values(block)), block_1_1 = block_1.next(); !block_1_1.done; block_1_1 = block_1.next()) {\n            var action = block_1_1.value;\n\n            if (action.type === start$1) {\n              activities[action.activity.id || action.activity.type] = action;\n            } else if (action.type === stop$1) {\n              activities[action.activity.id || action.activity.type] = false;\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (block_1_1 && !block_1_1.done && (_b = block_1.return)) _b.call(block_1);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (actionBlocks_1_1 && !actionBlocks_1_1.done && (_a = actionBlocks_1.return)) _a.call(actionBlocks_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    var _c = __read(resolveActions(this, currentState, context, _event, actionBlocks, predictableExec, this.machine.config.predictableActionArguments || this.machine.config.preserveActionOrder), 2),\n        resolvedActions = _c[0],\n        updatedContext = _c[1];\n\n    var _d = __read(partition(resolvedActions, function (action) {\n      return action.type === raise$1 || action.type === send && action.to === SpecialTargets.Internal;\n    }), 2),\n        raisedEvents = _d[0],\n        nonRaisedActions = _d[1];\n\n    var invokeActions = resolvedActions.filter(function (action) {\n      var _a;\n\n      return action.type === start$1 && ((_a = action.activity) === null || _a === void 0 ? void 0 : _a.type) === invoke;\n    });\n    var children = invokeActions.reduce(function (acc, action) {\n      acc[action.activity.id] = createInvocableActor(action.activity, _this.machine, updatedContext, _event);\n      return acc;\n    }, currentState ? __assign({}, currentState.children) : {});\n    var nextState = new State({\n      value: resolvedStateValue || currentState.value,\n      context: updatedContext,\n      _event: _event,\n      // Persist _sessionid between states\n      _sessionid: currentState ? currentState._sessionid : null,\n      historyValue: resolvedStateValue ? historyValue ? updateHistoryValue(historyValue, resolvedStateValue) : undefined : currentState ? currentState.historyValue : undefined,\n      history: !resolvedStateValue || stateTransition.source ? currentState : undefined,\n      actions: resolvedStateValue ? nonRaisedActions : [],\n      activities: resolvedStateValue ? activities : currentState ? currentState.activities : {},\n      events: [],\n      configuration: resolvedConfiguration,\n      transitions: stateTransition.transitions,\n      children: children,\n      done: isDone,\n      tags: getTagsFromConfiguration(resolvedConfiguration),\n      machine: this\n    });\n    var didUpdateContext = context !== updatedContext;\n    nextState.changed = _event.name === update || didUpdateContext; // Dispose of penultimate histories to prevent memory leaks\n\n    var history = nextState.history;\n\n    if (history) {\n      delete history.history;\n    } // There are transient transitions if the machine is not in a final state\n    // and if some of the state nodes have transient (\"always\") transitions.\n\n\n    var hasAlwaysTransitions = !isDone && (this._transient || configuration.some(function (stateNode) {\n      return stateNode._transient;\n    })); // If there are no enabled transitions, check if there are transient transitions.\n    // If there are transient transitions, continue checking for more transitions\n    // because an transient transition should be triggered even if there are no\n    // enabled transitions.\n    //\n    // If we're already working on an transient transition then stop to prevent an infinite loop.\n    //\n    // Otherwise, if there are no enabled nor transient transitions, we are done.\n\n    if (!willTransition && (!hasAlwaysTransitions || _event.name === NULL_EVENT)) {\n      return nextState;\n    }\n\n    var maybeNextState = nextState;\n\n    if (!isDone) {\n      if (hasAlwaysTransitions) {\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, {\n          type: nullEvent\n        }, _event, predictableExec);\n      }\n\n      while (raisedEvents.length) {\n        var raisedEvent = raisedEvents.shift();\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, raisedEvent._event, _event, predictableExec);\n      }\n    } // Detect if state changed\n\n\n    var changed = maybeNextState.changed || (history ? !!maybeNextState.actions.length || didUpdateContext || typeof history.value !== typeof maybeNextState.value || !stateValuesEqual(maybeNextState.value, history.value) : undefined);\n    maybeNextState.changed = changed; // Preserve original history after raised events\n\n    maybeNextState.history = history;\n    return maybeNextState;\n  };\n  /**\r\n   * Returns the child state node from its relative `stateKey`, or throws.\r\n   */\n\n\n  StateNode.prototype.getStateNode = function (stateKey) {\n    if (isStateId(stateKey)) {\n      return this.machine.getStateNodeById(stateKey);\n    }\n\n    if (!this.states) {\n      throw new Error(\"Unable to retrieve child state '\".concat(stateKey, \"' from '\").concat(this.id, \"'; no child states exist.\"));\n    }\n\n    var result = this.states[stateKey];\n\n    if (!result) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return result;\n  };\n  /**\r\n   * Returns the state node with the given `stateId`, or throws.\r\n   *\r\n   * @param stateId The state ID. The prefix \"#\" is removed.\r\n   */\n\n\n  StateNode.prototype.getStateNodeById = function (stateId) {\n    var resolvedStateId = isStateId(stateId) ? stateId.slice(STATE_IDENTIFIER.length) : stateId;\n\n    if (resolvedStateId === this.id) {\n      return this;\n    }\n\n    var stateNode = this.machine.idMap[resolvedStateId];\n\n    if (!stateNode) {\n      throw new Error(\"Child state node '#\".concat(resolvedStateId, \"' does not exist on machine '\").concat(this.id, \"'\"));\n    }\n\n    return stateNode;\n  };\n  /**\r\n   * Returns the relative state node from the given `statePath`, or throws.\r\n   *\r\n   * @param statePath The string or string array relative path to the state node.\r\n   */\n\n\n  StateNode.prototype.getStateNodeByPath = function (statePath) {\n    if (typeof statePath === 'string' && isStateId(statePath)) {\n      try {\n        return this.getStateNodeById(statePath.slice(1));\n      } catch (e) {// try individual paths\n        // throw e;\n      }\n    }\n\n    var arrayStatePath = toStatePath(statePath, this.delimiter).slice();\n    var currentStateNode = this;\n\n    while (arrayStatePath.length) {\n      var key = arrayStatePath.shift();\n\n      if (!key.length) {\n        break;\n      }\n\n      currentStateNode = currentStateNode.getStateNode(key);\n    }\n\n    return currentStateNode;\n  };\n  /**\r\n   * Resolves a partial state value with its full representation in this machine.\r\n   *\r\n   * @param stateValue The partial state value to resolve.\r\n   */\n\n\n  StateNode.prototype.resolve = function (stateValue) {\n    var _a;\n\n    var _this = this;\n\n    if (!stateValue) {\n      return this.initialStateValue || EMPTY_OBJECT; // TODO: type-specific properties\n    }\n\n    switch (this.type) {\n      case 'parallel':\n        return mapValues(this.initialStateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(stateValue[subStateKey] || subStateValue) : EMPTY_OBJECT;\n        });\n\n      case 'compound':\n        if (isString(stateValue)) {\n          var subStateNode = this.getStateNode(stateValue);\n\n          if (subStateNode.type === 'parallel' || subStateNode.type === 'compound') {\n            return _a = {}, _a[stateValue] = subStateNode.initialStateValue, _a;\n          }\n\n          return stateValue;\n        }\n\n        if (!Object.keys(stateValue).length) {\n          return this.initialStateValue || {};\n        }\n\n        return mapValues(stateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(subStateValue) : EMPTY_OBJECT;\n        });\n\n      default:\n        return stateValue || EMPTY_OBJECT;\n    }\n  };\n\n  StateNode.prototype.getResolvedPath = function (stateIdentifier) {\n    if (isStateId(stateIdentifier)) {\n      var stateNode = this.machine.idMap[stateIdentifier.slice(STATE_IDENTIFIER.length)];\n\n      if (!stateNode) {\n        throw new Error(\"Unable to find state node '\".concat(stateIdentifier, \"'\"));\n      }\n\n      return stateNode.path;\n    }\n\n    return toStatePath(stateIdentifier, this.delimiter);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateValue\", {\n    get: function () {\n      var _a;\n\n      if (this.__cache.initialStateValue) {\n        return this.__cache.initialStateValue;\n      }\n\n      var initialStateValue;\n\n      if (this.type === 'parallel') {\n        initialStateValue = mapFilterValues(this.states, function (state) {\n          return state.initialStateValue || EMPTY_OBJECT;\n        }, function (stateNode) {\n          return !(stateNode.type === 'history');\n        });\n      } else if (this.initial !== undefined) {\n        if (!this.states[this.initial]) {\n          throw new Error(\"Initial state '\".concat(this.initial, \"' not found on '\").concat(this.key, \"'\"));\n        }\n\n        initialStateValue = isLeafNode(this.states[this.initial]) ? this.initial : (_a = {}, _a[this.initial] = this.states[this.initial].initialStateValue, _a);\n      } else {\n        // The finite state value of a machine without child states is just an empty object\n        initialStateValue = {};\n      }\n\n      this.__cache.initialStateValue = initialStateValue;\n      return this.__cache.initialStateValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getInitialState = function (stateValue, context) {\n    this._init(); // TODO: this should be in the constructor (see note in constructor)\n\n\n    var configuration = this.getStateNodes(stateValue);\n    return this.resolveTransition({\n      configuration: configuration,\n      entrySet: __spreadArray([], __read(configuration), false),\n      exitSet: [],\n      transitions: [],\n      source: undefined,\n      actions: []\n    }, undefined, context !== null && context !== void 0 ? context : this.machine.context, undefined);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialState\", {\n    /**\r\n     * The initial State instance, which includes all actions to be executed from\r\n     * entering the initial state.\r\n     */\n    get: function () {\n      var initialStateValue = this.initialStateValue;\n\n      if (!initialStateValue) {\n        throw new Error(\"Cannot retrieve initial state from simple state '\".concat(this.id, \"'.\"));\n      }\n\n      return this.getInitialState(initialStateValue);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"target\", {\n    /**\r\n     * The target state value of the history state node, if it exists. This represents the\r\n     * default state value to transition to if no history value exists yet.\r\n     */\n    get: function () {\n      var target;\n\n      if (this.type === 'history') {\n        var historyConfig = this.config;\n\n        if (isString(historyConfig.target)) {\n          target = isStateId(historyConfig.target) ? pathToStateValue(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length - 1)) : historyConfig.target;\n        } else {\n          target = historyConfig.target;\n        }\n      }\n\n      return target;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Returns the leaf nodes from a state path relative to this state node.\r\n   *\r\n   * @param relativeStateId The relative state path to retrieve the state nodes\r\n   * @param history The previous state to retrieve history\r\n   * @param resolve Whether state nodes should resolve to initial child state nodes\r\n   */\n\n  StateNode.prototype.getRelativeStateNodes = function (relativeStateId, historyValue, resolve) {\n    if (resolve === void 0) {\n      resolve = true;\n    }\n\n    return resolve ? relativeStateId.type === 'history' ? relativeStateId.resolveHistory(historyValue) : relativeStateId.initialStateNodes : [relativeStateId];\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateNodes\", {\n    get: function () {\n      var _this = this;\n\n      if (isLeafNode(this)) {\n        return [this];\n      } // Case when state node is compound but no initial state is defined\n\n\n      if (this.type === 'compound' && !this.initial) {\n        if (!IS_PRODUCTION) {\n          warn(false, \"Compound state node '\".concat(this.id, \"' has no initial state.\"));\n        }\n\n        return [this];\n      }\n\n      var initialStateNodePaths = toStatePaths(this.initialStateValue);\n      return flatten(initialStateNodePaths.map(function (initialPath) {\n        return _this.getFromRelativePath(initialPath);\n      }));\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Retrieves state nodes from a relative path to this state node.\r\n   *\r\n   * @param relativePath The relative path from this state node\r\n   * @param historyValue\r\n   */\n\n  StateNode.prototype.getFromRelativePath = function (relativePath) {\n    if (!relativePath.length) {\n      return [this];\n    }\n\n    var _a = __read(relativePath),\n        stateKey = _a[0],\n        childStatePath = _a.slice(1);\n\n    if (!this.states) {\n      throw new Error(\"Cannot retrieve subPath '\".concat(stateKey, \"' from node with no states\"));\n    }\n\n    var childStateNode = this.getStateNode(stateKey);\n\n    if (childStateNode.type === 'history') {\n      return childStateNode.resolveHistory();\n    }\n\n    if (!this.states[stateKey]) {\n      throw new Error(\"Child state '\".concat(stateKey, \"' does not exist on '\").concat(this.id, \"'\"));\n    }\n\n    return this.states[stateKey].getFromRelativePath(childStatePath);\n  };\n\n  StateNode.prototype.historyValue = function (relativeStateValue) {\n    if (!Object.keys(this.states).length) {\n      return undefined;\n    }\n\n    return {\n      current: relativeStateValue || this.initialStateValue,\n      states: mapFilterValues(this.states, function (stateNode, key) {\n        if (!relativeStateValue) {\n          return stateNode.historyValue();\n        }\n\n        var subStateValue = isString(relativeStateValue) ? undefined : relativeStateValue[key];\n        return stateNode.historyValue(subStateValue || stateNode.initialStateValue);\n      }, function (stateNode) {\n        return !stateNode.history;\n      })\n    };\n  };\n  /**\r\n   * Resolves to the historical value(s) of the parent state node,\r\n   * represented by state nodes.\r\n   *\r\n   * @param historyValue\r\n   */\n\n\n  StateNode.prototype.resolveHistory = function (historyValue) {\n    var _this = this;\n\n    if (this.type !== 'history') {\n      return [this];\n    }\n\n    var parent = this.parent;\n\n    if (!historyValue) {\n      var historyTarget = this.target;\n      return historyTarget ? flatten(toStatePaths(historyTarget).map(function (relativeChildPath) {\n        return parent.getFromRelativePath(relativeChildPath);\n      })) : parent.initialStateNodes;\n    }\n\n    var subHistoryValue = nestedPath(parent.path, 'states')(historyValue).current;\n\n    if (isString(subHistoryValue)) {\n      return [parent.getStateNode(subHistoryValue)];\n    }\n\n    return flatten(toStatePaths(subHistoryValue).map(function (subStatePath) {\n      return _this.history === 'deep' ? parent.getFromRelativePath(subStatePath) : [parent.states[subStatePath[0]]];\n    }));\n  };\n\n  Object.defineProperty(StateNode.prototype, \"stateIds\", {\n    /**\r\n     * All the state node IDs of this state node and its descendant state nodes.\r\n     */\n    get: function () {\n      var _this = this;\n\n      var childStateIds = flatten(Object.keys(this.states).map(function (stateKey) {\n        return _this.states[stateKey].stateIds;\n      }));\n      return [this.id].concat(childStateIds);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"events\", {\n    /**\r\n     * All the event types accepted by this state node and its descendants.\r\n     */\n    get: function () {\n      var e_8, _a, e_9, _b;\n\n      if (this.__cache.events) {\n        return this.__cache.events;\n      }\n\n      var states = this.states;\n      var events = new Set(this.ownEvents);\n\n      if (states) {\n        try {\n          for (var _c = __values(Object.keys(states)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var stateId = _d.value;\n            var state = states[stateId];\n\n            if (state.states) {\n              try {\n                for (var _e = (e_9 = void 0, __values(state.events)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var event_1 = _f.value;\n                  events.add(\"\".concat(event_1));\n                }\n              } catch (e_9_1) {\n                e_9 = {\n                  error: e_9_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_9) throw e_9.error;\n                }\n              }\n            }\n          }\n        } catch (e_8_1) {\n          e_8 = {\n            error: e_8_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_8) throw e_8.error;\n          }\n        }\n      }\n\n      return this.__cache.events = Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"ownEvents\", {\n    /**\r\n     * All the events that have transitions directly from this state node.\r\n     *\r\n     * Excludes any inert events.\r\n     */\n    get: function () {\n      var events = new Set(this.transitions.filter(function (transition) {\n        return !(!transition.target && !transition.actions.length && transition.internal);\n      }).map(function (transition) {\n        return transition.eventType;\n      }));\n      return Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.resolveTarget = function (_target) {\n    var _this = this;\n\n    if (_target === undefined) {\n      // an undefined target signals that the state node should not transition from that state when receiving that event\n      return undefined;\n    }\n\n    return _target.map(function (target) {\n      if (!isString(target)) {\n        return target;\n      }\n\n      var isInternalTarget = target[0] === _this.delimiter; // If internal target is defined on machine,\n      // do not include machine key on target\n\n      if (isInternalTarget && !_this.parent) {\n        return _this.getStateNodeByPath(target.slice(1));\n      }\n\n      var resolvedTarget = isInternalTarget ? _this.key + target : target;\n\n      if (_this.parent) {\n        try {\n          var targetStateNode = _this.parent.getStateNodeByPath(resolvedTarget);\n\n          return targetStateNode;\n        } catch (err) {\n          throw new Error(\"Invalid transition definition for state node '\".concat(_this.id, \"':\\n\").concat(err.message));\n        }\n      } else {\n        return _this.getStateNodeByPath(resolvedTarget);\n      }\n    });\n  };\n\n  StateNode.prototype.formatTransition = function (transitionConfig) {\n    var _this = this;\n\n    var normalizedTarget = normalizeTarget(transitionConfig.target);\n    var internal = 'internal' in transitionConfig ? transitionConfig.internal : normalizedTarget ? normalizedTarget.some(function (_target) {\n      return isString(_target) && _target[0] === _this.delimiter;\n    }) : true;\n    var guards = this.machine.options.guards;\n    var target = this.resolveTarget(normalizedTarget);\n\n    var transition = __assign(__assign({}, transitionConfig), {\n      actions: toActionObjects(toArray(transitionConfig.actions)),\n      cond: toGuard(transitionConfig.cond, guards),\n      target: target,\n      source: this,\n      internal: internal,\n      eventType: transitionConfig.event,\n      toJSON: function () {\n        return __assign(__assign({}, transition), {\n          target: transition.target ? transition.target.map(function (t) {\n            return \"#\".concat(t.id);\n          }) : undefined,\n          source: \"#\".concat(_this.id)\n        });\n      }\n    });\n\n    return transition;\n  };\n\n  StateNode.prototype.formatTransitions = function () {\n    var e_10, _a;\n\n    var _this = this;\n\n    var onConfig;\n\n    if (!this.config.on) {\n      onConfig = [];\n    } else if (Array.isArray(this.config.on)) {\n      onConfig = this.config.on;\n    } else {\n      var _b = this.config.on,\n          _c = WILDCARD,\n          _d = _b[_c],\n          wildcardConfigs = _d === void 0 ? [] : _d,\n          strictTransitionConfigs_1 = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n      onConfig = flatten(Object.keys(strictTransitionConfigs_1).map(function (key) {\n        if (!IS_PRODUCTION && key === NULL_EVENT) {\n          warn(false, \"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. \" + \"Please check the `on` configuration for \\\"#\".concat(_this.id, \"\\\".\"));\n        }\n\n        var transitionConfigArray = toTransitionConfigArray(key, strictTransitionConfigs_1[key]);\n\n        if (!IS_PRODUCTION) {\n          validateArrayifiedTransitions(_this, key, transitionConfigArray);\n        }\n\n        return transitionConfigArray;\n      }).concat(toTransitionConfigArray(WILDCARD, wildcardConfigs)));\n    }\n\n    var eventlessConfig = this.config.always ? toTransitionConfigArray('', this.config.always) : [];\n    var doneConfig = this.config.onDone ? toTransitionConfigArray(String(done(this.id)), this.config.onDone) : [];\n\n    if (!IS_PRODUCTION) {\n      warn(!(this.config.onDone && !this.parent), \"Root nodes cannot have an \\\".onDone\\\" transition. Please check the config of \\\"\".concat(this.id, \"\\\".\"));\n    }\n\n    var invokeConfig = flatten(this.invoke.map(function (invokeDef) {\n      var settleTransitions = [];\n\n      if (invokeDef.onDone) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(doneInvoke(invokeDef.id)), invokeDef.onDone)), false));\n      }\n\n      if (invokeDef.onError) {\n        settleTransitions.push.apply(settleTransitions, __spreadArray([], __read(toTransitionConfigArray(String(error(invokeDef.id)), invokeDef.onError)), false));\n      }\n\n      return settleTransitions;\n    }));\n    var delayedTransitions = this.after;\n    var formattedTransitions = flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([], __read(doneConfig), false), __read(invokeConfig), false), __read(onConfig), false), __read(eventlessConfig), false).map(function (transitionConfig) {\n      return toArray(transitionConfig).map(function (transition) {\n        return _this.formatTransition(transition);\n      });\n    }));\n\n    try {\n      for (var delayedTransitions_1 = __values(delayedTransitions), delayedTransitions_1_1 = delayedTransitions_1.next(); !delayedTransitions_1_1.done; delayedTransitions_1_1 = delayedTransitions_1.next()) {\n        var delayedTransition = delayedTransitions_1_1.value;\n        formattedTransitions.push(delayedTransition);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (delayedTransitions_1_1 && !delayedTransitions_1_1.done && (_a = delayedTransitions_1.return)) _a.call(delayedTransitions_1);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n\n    return formattedTransitions;\n  };\n\n  return StateNode;\n}();\n\nexport { StateNode };\n","import { StateNode } from './StateNode.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nvar warned = false;\nfunction Machine(config, options, initialContext) {\n  if (initialContext === void 0) {\n    initialContext = config.context;\n  }\n\n  return new StateNode(config, options, initialContext);\n}\nfunction createMachine(config, options) {\n  if (!IS_PRODUCTION && !config.predictableActionArguments && !warned) {\n    warned = true;\n    console.warn('It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html');\n  }\n\n  return new StateNode(config, options);\n}\n\nexport { Machine, createMachine };\n","import { __values } from './_virtual/_tslib.js';\nimport { matchesState } from './utils.js';\n\nfunction mapState(stateMap, stateId) {\n  var e_1, _a;\n\n  var foundStateId;\n\n  try {\n    for (var _b = __values(Object.keys(stateMap)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var mappedStateId = _c.value;\n\n      if (matchesState(mappedStateId, stateId) && (!foundStateId || stateId.length > foundStateId.length)) {\n        foundStateId = mappedStateId;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return stateMap[foundStateId];\n}\n\nexport { mapState };\n","import { __values, __read } from './_virtual/_tslib.js';\nimport { State } from './State.js';\n\nfunction matchState(state, patterns, defaultValue) {\n  var e_1, _a;\n\n  var resolvedState = State.from(state, state instanceof State ? state.context : undefined);\n\n  try {\n    for (var patterns_1 = __values(patterns), patterns_1_1 = patterns_1.next(); !patterns_1_1.done; patterns_1_1 = patterns_1.next()) {\n      var _b = __read(patterns_1_1.value, 2),\n          stateValue = _b[0],\n          getValue = _b[1];\n\n      if (resolvedState.matches(stateValue)) {\n        return getValue(resolvedState);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (patterns_1_1 && !patterns_1_1.done && (_a = patterns_1.return)) _a.call(patterns_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return defaultValue(resolvedState);\n}\n\nexport { matchState };\n","function createSchema(schema) {\n  return schema;\n}\nvar t = createSchema;\n\nexport { createSchema, t };\n","import { assign as assign$1, send as send$1, sendParent as sendParent$1, sendUpdate as sendUpdate$1, forwardTo as forwardTo$1, doneInvoke as doneInvoke$1 } from './actions.js';\nimport * as actions from './actions.js';\nexport { actions };\nexport { toActorRef } from './Actor.js';\nexport { Interpreter, InterpreterStatus, interpret, spawn } from './interpreter.js';\nexport { Machine, createMachine } from './Machine.js';\nexport { mapState } from './mapState.js';\nexport { matchState } from './match.js';\nexport { createSchema, t } from './schema.js';\nexport { State } from './State.js';\nexport { StateNode } from './StateNode.js';\nexport { spawnBehavior } from './behaviors.js';\nexport { ActionTypes, SpecialTargets } from './types.js';\nexport { matchesState, toEventObject, toObserver, toSCXMLEvent } from './utils.js';\n\nvar assign = assign$1,\n    send = send$1,\n    sendParent = sendParent$1,\n    sendUpdate = sendUpdate$1,\n    forwardTo = forwardTo$1,\n    doneInvoke = doneInvoke$1;\n\nexport { assign, doneInvoke, forwardTo, send, sendParent, sendUpdate };\n","import { Machine } from \"xstate\";\r\n\r\ntype ToggleEvent = {\r\n  type: \"TOGGLE\";\r\n};\r\n\r\n// State Machine\r\nexport const toggleMachine = Machine<ToggleEvent>({\r\n  id: \"toggleButton\",\r\n  initial: \"idle\",\r\n  states: {\r\n    idle: {\r\n      on: { TOGGLE: \"active\" },\r\n    },\r\n    inactive: {\r\n      on: { TOGGLE: \"active\" },\r\n    },\r\n    active: {\r\n      on: { TOGGLE: \"inactive\" },\r\n    },\r\n  },\r\n});\r\n","/*\n * anime.js v3.2.1\n * (c) 2020 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective', 'matrix', 'matrix3d'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  nil: function (a) { return is.und(a) || a === null; },\n  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },\n  rgb: function (a) { return /^rgb/.test(a); },\n  hsl: function (a) { return /^hsl/.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; },\n};\n\n// Easings\n\nfunction parseEasingParameters(string) {\n  var match = /\\(([^)]+)\\)/.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.ceil((minMax(t, 0.000001, 1)) * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  // Based on jQuery UI's implemenation of easing equations from Robert Penner (http://www.robertpenner.com/easing)\n\n  var eases = { linear: function () { return function (t) { return t; }; } };\n\n  var functionEasings = {\n    Sine: function () { return function (t) { return 1 - Math.cos(t * Math.PI / 2); }; },\n    Circ: function () { return function (t) { return 1 - Math.sqrt(1 - t * t); }; },\n    Back: function () { return function (t) { return t * t * (3 * t - 2); }; },\n    Bounce: function () { return function (t) {\n      var pow2, b = 4;\n      while (t < (( pow2 = Math.pow(2, --b)) - 1) / 11) {}\n      return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow(( pow2 * 3 - 2 ) / 22 - t, 2)\n    }; },\n    Elastic: function (amplitude, period) {\n      if ( amplitude === void 0 ) amplitude = 1;\n      if ( period === void 0 ) period = .5;\n\n      var a = minMax(amplitude, 1, 10);\n      var p = minMax(period, .1, 2);\n      return function (t) {\n        return (t === 0 || t === 1) ? t : \n          -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n      }\n    }\n  };\n\n  var baseEasings = ['Quad', 'Cubic', 'Quart', 'Quint', 'Expo'];\n\n  baseEasings.forEach(function (name, i) {\n    functionEasings[name] = function () { return function (t) { return Math.pow(t, i + 2); }; };\n  });\n\n  Object.keys(functionEasings).forEach(function (name) {\n    var easeIn = functionEasings[name];\n    eases['easeIn' + name] = easeIn;\n    eases['easeOut' + name] = function (a, b) { return function (t) { return 1 - easeIn(a, b)(1 - t); }; };\n    eases['easeInOut' + name] = function (a, b) { return function (t) { return t < 0.5 ? easeIn(a, b)(t * 2) / 2 : \n      1 - easeIn(a, b)(t * -2 + 2) / 2; }; };\n    eases['easeOutIn' + name] = function (a, b) { return function (t) { return t < 0.5 ? (1 - easeIn(a, b)(1 - t * 2)) / 2 : \n      (easeIn(a, b)(t * 2 - 1) + 1) / 2; }; };\n  });\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return applyArguments(ease, args);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nfunction filterArray(arr, callback) {\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  var result = [];\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n  return result;\n}\n\nfunction flattenArray(arr) {\n  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nfunction hexToRgba(hexValue) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nfunction hslToRgba(hslValue) {\n  var hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nfunction getUnit(val) {\n  var split = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n  if (split) { return split[1]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (!is.nil(getAttribute(el, prop)) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var reg  = /(\\w+)\\(([^)]*)\\)/g;\n  var transforms = new Map();\n  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nfunction getRelativeValue(to, from) {\n  var operator = /^(\\*=|\\+=|-=)/.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  if (/\\s/g.test(val)) { return val; }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  if (unit) { return unitLess + unit; }\n  return unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, \n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    if (!is.svg(parentEl.parentNode)) { break; }\n    parentEl = parentEl.parentNode;\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width,\n    h: height,\n    vW: viewBox[2],\n    vH: viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress, isPathTargetInsideSVG) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  var scaleX = isPathTargetInsideSVG ? 1 : svg.w / svg.vW;\n  var scaleY = isPathTargetInsideSVG ? 1 : svg.h / svg.vH;\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * scaleX;\n    case 'y': return (p.y - svg.y) * scaleY;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nfunction decomposeValue(val, unit) {\n  // const rgx = /-?\\d*\\.?\\d+/g; // handles basic numbers\n  // const rgx = /[+-]?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?/g; // handles exponents notation\n  var rgx = /[+-]?\\d*\\.?\\d+(?:\\.\\d+)?(?:[eE][+-]?\\d+)?/g; // handles exponents notation\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(rgx) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isPathTargetInsideSVG = tween.isPath && is.svg(animatable.target);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n  animatables.forEach(function (animatable) {\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  });\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\n\nvar engine = (function () {\n  var raf;\n\n  function play() {\n    if (!raf && (!isDocumentHidden() || !anime.suspendWhenDocumentHidden) && activeInstances.length > 0) {\n      raf = requestAnimationFrame(step);\n    }\n  }\n  function step(t) {\n    // memo on algorithm issue:\n    // dangerous iteration over mutable `activeInstances`\n    // (that collection may be updated from within callbacks of `tick`-ed animation instances)\n    var activeInstancesLength = activeInstances.length;\n    var i = 0;\n    while (i < activeInstancesLength) {\n      var activeInstance = activeInstances[i];\n      if (!activeInstance.paused) {\n        activeInstance.tick(t);\n        i++;\n      } else {\n        activeInstances.splice(i, 1);\n        activeInstancesLength--;\n      }\n    }\n    raf = i > 0 ? requestAnimationFrame(step) : undefined;\n  }\n\n  function handleVisibilityChange() {\n    if (!anime.suspendWhenDocumentHidden) { return; }\n\n    if (isDocumentHidden()) {\n      // suspend ticks\n      raf = cancelAnimationFrame(raf);\n    } else { // is back to active tab\n      // first adjust animations to consider the time that ticks were suspended\n      activeInstances.forEach(\n        function (instance) { return instance ._onDocumentVisibility(); }\n      );\n      engine();\n    }\n  }\n  if (typeof document !== 'undefined') {\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n  }\n\n  return play;\n})();\n\nfunction isDocumentHidden() {\n  return !!document && document.hidden;\n}\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise(instance) {\n    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n    instance.finished = promise;\n    return promise;\n  }\n\n  var instance = createNewInstance(params);\n  var promise = makePromise(instance);\n\n  function toggleInstanceDirection() {\n    var direction = instance.direction;\n    if (direction !== 'alternate') {\n      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';\n    }\n    instance.reversed = !instance.reversed;\n    children.forEach(function (child) { return child.reversed = instance.reversed; });\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekChild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekChild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekChild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber, tween.isPathTargetInsideSVG);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n    }\n    if (!instance.loopBegan && instance.currentTime > 0) {\n      instance.loopBegan = true;\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (!instance.remaining) {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if (!instance.passThrough && 'Promise' in window) {\n            resolve();\n            promise = makePromise(instance);\n          }\n        }\n      } else {\n        startTime = now;\n        setCallback('loopComplete');\n        instance.loopBegan = false;\n        if (instance.direction === 'alternate') {\n          toggleInstanceDirection();\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.loopBegan = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(instance.reversed ? instance.duration : 0);\n  };\n\n  // internal method (for engine) to adjust animation timings before restoring engine ticks (rAF)\n  instance._onDocumentVisibility = resetTime;\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    if (instance.completed) { instance.reset(); }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    engine();\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    instance.completed = instance.reversed ? false : true;\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.remove = function(targets) {\n    var targetsArray = parseTargets(targets);\n    removeTargetsFromInstance(targetsArray, instance);\n  };\n\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargetsFromInstance(targetsArray, instance) {\n  var animations = instance.animations;\n  var children = instance.children;\n  removeTargetsFromAnimations(targetsArray, animations);\n  for (var c = children.length; c--;) {\n    var child = children[c];\n    var childAnimations = child.animations;\n    removeTargetsFromAnimations(targetsArray, childAnimations);\n    if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n  }\n  if (!animations.length && !children.length) { instance.pause(); }\n}\n\nfunction removeTargetsFromActiveInstances(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    removeTargetsFromInstance(targetsArray, instance);\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.2.1';\nanime.speed = 1;\n// TODO:#review: naming, documentation\nanime.suspendWhenDocumentHidden = true;\nanime.running = activeInstances;\nanime.remove = removeTargetsFromActiveInstances;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","import { interpret } from \"xstate\";\r\nimport { toggleMachine } from \"./scripts/state\";\r\n\r\n// Anime\r\nimport anime from \"animejs/lib/anime.es.js\";\r\n\r\n// Variables\r\nconst button: HTMLElement = document.querySelector(\"#addNote\");\r\nconst noteSelects: NodeListOf<HTMLElement> = document.querySelectorAll(\".selector\");\r\nconst notesBlock: HTMLElement = document.querySelector(\".notes\");\r\n\r\n\r\nconst toggleService = interpret(toggleMachine);\r\n\r\nconst toggle = () => {\r\n  button.addEventListener(\"click\", () => {\r\n    toggleService.send(\"TOGGLE\");\r\n  });\r\n};\r\n\r\nconst buttonDisabled = (btnStatus: boolean) => {\r\n  if (btnStatus) {\r\n    button.setAttribute(\"disabled\", \"\");\r\n  } else {\r\n    button.removeAttribute(\"disabled\");\r\n  }\r\n};\r\n\r\nconst animate = (status: any) => {\r\n  const tl = anime.timeline();\r\n  if (status === \"active\") {\r\n    buttonDisabled(true);\r\n    tl.add({\r\n      targets: button,\r\n      translateY: [0, -12, 0],\r\n      scale: [1, 0.85, 1],\r\n      rotate: 316,\r\n      duration: 600,\r\n      easing: \"easeInOutSine\",\r\n    })\r\n      .add(\r\n        {\r\n          targets: \".note-selectors .first\",\r\n          translateY: [0, 80],\r\n          duration: 3200,\r\n          scaleY: [1.8, 1],\r\n        },\r\n        \"-=400\"\r\n      )\r\n      .add(\r\n        {\r\n          targets: \".note-selectors .other\",\r\n          translateY: function (el) {\r\n            return [el.getAttribute(\"data-from\"), el.getAttribute(\"data-to\")];\r\n          },\r\n          scaleY: [0, 1],\r\n          duration: 1600,\r\n          opacity: {\r\n            value: 1,\r\n            duration: 10,\r\n          },\r\n          delay: anime.stagger(240),\r\n          complete: function () {\r\n            buttonDisabled(false);\r\n          },\r\n        },\r\n        \"-=2600\"\r\n      );\r\n  } else if (status === \"inactive\") {\r\n    buttonDisabled(true);\r\n    tl.add({\r\n      targets: button,\r\n      rotate: 0,\r\n      duration: 600,\r\n      easing: \"easeInOutSine\",\r\n    }).add(\r\n      {\r\n        targets: \".note-selectors .selector\",\r\n        translateY: function (el) {\r\n          return [el.getAttribute(\"data-to\"), 0];\r\n        },\r\n        duration: 400,\r\n        delay: anime.stagger(60),\r\n        easing: \"easeInOutSine\",\r\n        complete: function () {\r\n          buttonDisabled(false);\r\n        },\r\n      },\r\n      \"-=400\"\r\n    );\r\n  }\r\n};\r\n\r\nconst init = () => {\r\n  toggleService\r\n    .onTransition((state) => {\r\n      console.log(state.value);\r\n      animate(state.value);\r\n    })\r\n    .start();\r\n  toggle();\r\n};\r\n\r\ninit();\r\n\r\nconst cardInner = `\r\n            <textarea\r\n              type=\"text\"\r\n              placeholder=\"The beginning of screenless design: UI jobs to be take over by Solution Architect\"\r\n            ></textarea>\r\n            <div class=\"footer\">\r\n              <div class=\"date\">\r\n                <span>May 21, 2020</span>\r\n              </div>\r\n              <div class=\"edit\">\r\n                <button>\r\n                <i class=\"fas fa-edit\"></i>\r\n                </button>\r\n              </div>\r\n            </div>   \r\n          \r\n`;\r\n\r\n\r\n\r\nconst animateNote = (card) => {\r\n  const cardRect = card.getBoundingClientRect();\r\n  const notes: NodeListOf<HTMLElement> = document.querySelectorAll(\".note\");\r\n  const noteRect = document.querySelector('.note').getBoundingClientRect();\r\n  const tl = anime.timeline();\r\n\r\n  tl.add({\r\n    targets: card,\r\n    duration: 1000,\r\n    easing: \"easeInOutSine\",\r\n    translateX: 155,\r\n    translateY: (cardRect.top - noteRect.top) * -1,\r\n  }).add({\r\n    targets: '.note',\r\n    translateX: [0,noteRect.width+50],\r\n    duration: 2000,\r\n    delay: 600,\r\n  }, \"-=1000\")\r\n  .add({\r\n    targets: card,\r\n    borderRadius: 24,\r\n    duration: 1000,\r\n    width:  300,\r\n    height: 310,\r\n    scaleY: {\r\n      value: [0,1],\r\n      duration: 2000,\r\n    },\r\n    complete: function () {\r\n      card.className = \"note\";\r\n      card.innerHTML = cardInner;\r\n      notes.forEach(nt=> {\r\n      nt.classList.add('note-transform');\r\n    })\r\n     notesBlock.prepend(card);\r\n     card.style.transform = \"translate(0,0)\";\r\n     \r\n    },\r\n  },\"-=1500\")\r\n};\r\n\r\n\r\nnoteSelects.forEach((el: HTMLElement) => {\r\n  el.addEventListener(\"click\", () => {\r\n    // notesBlock.insertAdjacentHTML(\"afterbegin\", cardInner);\r\n    const notes: NodeListOf<HTMLElement> = document.querySelectorAll(\".note\");\r\n    const dotRect = el.getBoundingClientRect();\r\n    const elStyle = getComputedStyle(el);\r\n    const newCard = document.createElement(\"div\");\r\n    newCard.className = \"note\";\r\n\r\n    const newDot = document.createElement(\"div\");\r\n    newDot.style.width = `${dotRect.width}px`;\r\n    newDot.style.height = `${dotRect.height}px`;\r\n    newDot.style.background = elStyle.background;\r\n\r\n    el.prepend(newDot);\r\n\r\n    notes\r\n    .forEach(nt=> {\r\n      nt.classList.remove('note-transform');\r\n    })\r\n    \r\n    animateNote(newDot);\r\n   \r\n  });\r\n});\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}